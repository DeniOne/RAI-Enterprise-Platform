generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Role {
  id          String         @id @default(uuid())
  name        String         @unique
  description String?
  code        String         @unique
  is_active   Boolean        @default(true)
  created_at  DateTime       @default(now())
  updated_at  DateTime       @updatedAt
  contracts   RoleContract[]
  users       User[]

  @@map("roles")
}

model RoleContract {
  id                   String    @id @default(uuid())
  role_id              String
  mission              String
  value_product        String
  responsibility_zones Json
  kpi_definitions      Json
  permissions          Json
  growth_paths         Json
  version              Int       @default(1)
  is_active            Boolean   @default(true)
  effective_from       DateTime  @default(now())
  effective_to         DateTime?
  created_at           DateTime  @default(now())
  updated_at           DateTime  @updatedAt
  role                 Role      @relation(fields: [role_id], references: [id])

  @@unique([role_id, version])
  @@map("role_contracts")
}

model QualificationLevel {
  id           String   @id @default(uuid())
  name         String   @unique
  level        Int      @unique
  description  String?
  requirements Json?
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
  users        User[]

  @@map("qualification_levels")
}

model Event {
  id           String    @id @default(uuid())
  type         EventType
  source       String
  subject_id   String
  subject_type String
  payload      Json
  metadata     Json?
  timestamp    DateTime  @default(now())
  processed_at DateTime?

  @@index([type, timestamp])
  @@index([subject_id, subject_type])
  @@index([processed_at])
  @@map("events")
}

model AntiFraudSignal {
  id              String   @id @default(uuid())
  entity_type     String
  entity_id       String
  level           String
  type            String
  metric_snapshot Json
  detected_at     DateTime @default(now())
  context         Json

  @@index([entity_type, entity_id])
  @@index([level, type])
  @@index([detected_at])
  @@map("anti_fraud_signals")
}

model KPI {
  id                 String      @id @default(uuid())
  name               String      @unique
  description        String?
  formula            String
  source_events      Json
  calculation_period String
  unit               String?
  is_active          Boolean     @default(true)
  created_at         DateTime    @default(now())
  updated_at         DateTime    @updatedAt
  records            KPIRecord[]

  @@map("kpis")
}

model KPIRecord {
  id               String   @id @default(uuid())
  kpi_id           String
  user_id          String?
  department_id    String?
  value            Decimal  @db.Decimal(15, 4)
  period_start     DateTime
  period_end       DateTime
  calculated_at    DateTime @default(now())
  source_event_ids Json
  kpi              KPI      @relation(fields: [kpi_id], references: [id])

  @@index([kpi_id, period_start, period_end])
  @@map("kpi_records")
}

model RewardRule {
  id          String   @id @default(uuid())
  name        String   @unique
  description String?
  trigger     Json
  condition   Json
  reward      Json
  is_active   Boolean  @default(true)
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt

  @@map("reward_rules")
}

model User {
  id                           String                       @id @default(uuid())
  email                        String                       @unique
  password_hash                String
  first_name                   String
  last_name                    String
  middle_name                  String?
  phone_number                 String?
  role                         UserRole                     @default(EMPLOYEE)
  status                       UserStatus                   @default(ACTIVE)
  avatar                       String?
  department_id                String?
  last_login_at                DateTime?
  created_at                   DateTime                     @default(now())
  updated_at                   DateTime                     @updatedAt
  telegram_id                  String?                      @unique
  consent_date                 DateTime?
  personal_data_consent        Boolean                      @default(false)
  qualification_level_id       String?
  role_id                      String?
  must_reset_password          Boolean                      @default(true)
  reset_password_token         String?                      @unique
  reset_token_expires_at       DateTime?
  foundation_status            FoundationStatus             @default(NOT_STARTED)
  ai_feedback                  AIFeedback[]
  audit_logs                   AuditLog[]
  auth_sessions                AuthSession[]
  reward_eligibilities         RewardEligibility[]
  assigned_roles               EmployeeRole[]               @relation("RoleAssigner")
  employee_roles               EmployeeRole[]
  employee                     Employee?
  foundation_acceptance        FoundationAcceptance?
  hybrid_interactions          HybridTeamInteraction[]
  submitted_ideas              IdeaChannel[]
  kaizen_suggestions           Kaizen[]
  mentorship_as_mentee         Mentorship?                  @relation("MenteeUser")
  mentorship_as_mentor         Mentorship[]                 @relation("MentorUser")
  mes_registered_defects       Defect[]
  mes_created_orders           ProductionOrder[]
  mes_quality_checks           QualityCheck[]
  mes_assigned_works           WorkOrder[]
  notifications                Notification[]
  one_on_ones_attended         OneOnOne[]                   @relation("Employee1on1")
  one_on_ones_managed          OneOnOne[]                   @relation("Manager1on1")
  structure_changes            OrgStructureHistory[]
  participation_status_history ParticipationStatusHistory[]
  purchases                    Purchase[]
  raci_entries                 RaciMatrix[]
  subordinate_relations        ReportingRelationship[]      @relation("SubordinateRelation")
  supervisor_relations         ReportingRelationship[]      @relation("SupervisorRelation")
  attachments                  TaskAttachment[]
  comments                     TaskComment[]
  assigned_tasks               Task[]                       @relation("AssignedTasks")
  created_tasks                Task[]                       @relation("CreatedTasks")
  received_transactions        Transaction[]                @relation("ReceivedTransactions")
  sent_transactions            Transaction[]                @relation("SentTransactions")
  triangle_assignments         TriangleAssignment[]
  achievements                 UserAchievement[]
  statuses                     UserGamificationStatus[]
  current_participation_rank   UserParticipationRank?
  current_participation_status UserParticipationStatus?
  qualification_level          QualificationLevel?          @relation(fields: [qualification_level_id], references: [id])
  erp_role                     Role?                        @relation(fields: [role_id], references: [id])
  wallet                       Wallet?

  @@map("users")
}

model Mentorship {
  id         String   @id @default(uuid())
  mentor_id  String
  mentee_id  String   @unique
  status     String   @default("ACTIVE")
  goals      Json?
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
  mentee     User     @relation("MenteeUser", fields: [mentee_id], references: [id])
  mentor     User     @relation("MentorUser", fields: [mentor_id], references: [id])

  @@map("mentorships")
}

model OneOnOne {
  id           String    @id @default(uuid())
  manager_id   String
  employee_id  String
  scheduled_at DateTime
  completed_at DateTime?
  notes        String?
  action_items Json?
  mood         Int?
  created_at   DateTime  @default(now())
  updated_at   DateTime  @updatedAt
  employee     User      @relation("Employee1on1", fields: [employee_id], references: [id])
  manager      User      @relation("Manager1on1", fields: [manager_id], references: [id])

  @@map("one_on_ones")
}

model Kaizen {
  id              String   @id @default(uuid())
  author_id       String
  text            String
  status          String   @default("NEW")
  manager_comment String?
  history         Json     @default("[]")
  created_at      DateTime @default(now())
  updated_at      DateTime @updatedAt
  author          User     @relation(fields: [author_id], references: [id])

  @@map("kaizen")
}

model Department {
  id              String                 @id @default(uuid())
  name            String                 @unique
  description     String?
  head_id         String?
  parent_id       String?
  created_at      DateTime               @default(now())
  updated_at      DateTime               @updatedAt
  code            String                 @unique
  annual_goals    String?
  budget_annual   Decimal?               @db.Decimal(15, 2)
  department_type String?
  faculty_link    String?
  functions       String[]
  hierarchy_level Int?
  is_active       Boolean                @default(true)
  kpis            Json?
  level           Int                    @default(0)
  path            String?
  parent          Department?            @relation("DepartmentHierarchy", fields: [parent_id], references: [id])
  children        Department[]           @relation("DepartmentHierarchy")
  employees       Employee[]
  role_matrices   RoleCompetencyMatrix[]
  tasks           Task[]

  @@map("departments")
}

model Employee {
  id               String         @id @default(uuid())
  user_id          String         @unique
  department_id    String?
  position         String?
  bio              String?
  status           EmployeeStatus @default(PHOTON)
  rank             EmployeeRank   @default(COLLECTOR)
  hired_at         DateTime       @default(now())
  created_at       DateTime       @default(now())
  updated_at       DateTime       @updatedAt
  emotional_tone   Int?           @default(0)
  employee_number  String?        @unique
  gmc_balance      Decimal?       @default(0) @db.Decimal(10, 2)
  mc_balance       Decimal?       @default(0) @db.Decimal(10, 2)
  salary           Decimal?       @db.Decimal(10, 2)
  termination_date DateTime?
  hire_date        DateTime?
  department       Department?    @relation(fields: [department_id], references: [id])
  user             User           @relation(fields: [user_id], references: [id])
  PersonalFile     PersonalFile?

  @@map("employees")
}

model Task {
  id            String           @id @default(uuid())
  title         String
  description   String
  status        TaskStatus       @default(TODO)
  priority      TaskPriority     @default(MEDIUM)
  creator_id    String
  assignee_id   String?
  department_id String?
  due_date      DateTime?
  completed_at  DateTime?
  tags          String[]
  mc_reward     Decimal?         @db.Decimal(10, 2)
  created_at    DateTime         @default(now())
  updated_at    DateTime         @updatedAt
  attachments   TaskAttachment[]
  comments      TaskComment[]
  assignee      User?            @relation("AssignedTasks", fields: [assignee_id], references: [id])
  creator       User             @relation("CreatedTasks", fields: [creator_id], references: [id])
  department    Department?      @relation(fields: [department_id], references: [id])

  @@map("tasks")
}

model TaskComment {
  id         String   @id @default(uuid())
  task_id    String
  user_id    String
  text       String
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
  task       Task     @relation(fields: [task_id], references: [id])
  user       User     @relation(fields: [user_id], references: [id])

  @@map("task_comments")
}

model TaskAttachment {
  id         String   @id @default(uuid())
  task_id    String
  user_id    String
  file_url   String
  file_name  String
  file_type  String
  created_at DateTime @default(now())
  task       Task     @relation(fields: [task_id], references: [id])
  user       User     @relation(fields: [user_id], references: [id])

  @@map("task_attachments")
}

model Wallet {
  id                String    @id @default(uuid())
  user_id           String    @unique
  mc_balance        Decimal   @default(0) @db.Decimal(10, 2)
  gmc_balance       Decimal   @default(0) @db.Decimal(10, 2)
  mc_frozen         Decimal   @default(0) @db.Decimal(10, 2)
  safe_activated_at DateTime?
  safe_expires_at   DateTime?
  created_at        DateTime  @default(now())
  updated_at        DateTime  @updatedAt
  user              User      @relation(fields: [user_id], references: [id])

  @@map("wallets")
}

model Transaction {
  id           String          @id @default(uuid())
  type         TransactionType
  currency     Currency
  amount       Decimal         @db.Decimal(10, 2)
  sender_id    String?
  recipient_id String?
  description  String?
  metadata     Json?
  created_at   DateTime        @default(now())
  recipient    User?           @relation("ReceivedTransactions", fields: [recipient_id], references: [id])
  sender       User?           @relation("SentTransactions", fields: [sender_id], references: [id])

  @@map("transactions")
}

model Notification {
  id         String    @id @default(uuid())
  user_id    String
  type       String
  title      String
  message    String
  read       Boolean   @default(false)
  read_at    DateTime?
  metadata   Json?
  created_at DateTime  @default(now())
  user       User      @relation(fields: [user_id], references: [id])

  @@map("notifications")
}

model AuditLog {
  id          String   @id @default(uuid())
  user_id     String?
  action      String
  entity_type String?
  entity_id   String?
  details     Json?
  ip_address  String?
  user_agent  String?
  created_at  DateTime @default(now())
  user        User?    @relation(fields: [user_id], references: [id])

  @@map("audit_logs")
}

model Product {
  id          String   @id @default(uuid())
  name        String
  description String
  price       Decimal  @db.Decimal(10, 2)
  stock       Int      @default(0)
  image_url   String?
  is_active   Boolean  @default(true)
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt

  @@map("products")
}

model StoreItem {
  id            String     @id @default(uuid())
  title         String
  description   String
  priceMC       Int
  category      String
  active        Boolean    @default(true)
  stock         Int?
  purchaseLimit Int?
  metadata      Json       @default("{}")
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt
  purchases     Purchase[]

  @@map("store_items")
}

model Purchase {
  id             String         @id @default(uuid())
  createdAt      DateTime       @default(now())
  idempotencyKey String
  itemId         String
  priceMC        Int
  transactionId  String
  userId         String
  status         PurchaseStatus @default(COMPLETED)
  item           StoreItem      @relation(fields: [itemId], references: [id])
  user           User           @relation(fields: [userId], references: [id])

  @@unique([userId, idempotencyKey])
  @@index([userId])
  @@index([itemId])
  @@map("purchases")
}

model GamificationLevel {
  id           String                   @id @default(uuid())
  name         String                   @unique
  level        Int                      @unique
  requirements Json?
  created_at   DateTime                 @default(now())
  updated_at   DateTime                 @updatedAt
  users        UserGamificationStatus[]

  @@map("gamification_levels")
}

model UserGamificationStatus {
  id          String            @id @default(uuid())
  user_id     String
  status_id   String
  achieved_at DateTime          @default(now())
  status      GamificationLevel @relation(fields: [status_id], references: [id])
  user        User              @relation(fields: [user_id], references: [id])

  @@unique([user_id, status_id])
  @@index([user_id])
  @@index([achieved_at])
  @@map("user_gamification_statuses")
}

model Achievement {
  id          String            @id @default(uuid())
  name        String
  description String?
  icon_url    String?
  created_at  DateTime          @default(now())
  users       UserAchievement[]

  @@map("achievements")
}

model UserAchievement {
  id             String      @id @default(uuid())
  user_id        String
  achievement_id String
  earned_at      DateTime    @default(now())
  achievement    Achievement @relation(fields: [achievement_id], references: [id])
  user           User        @relation(fields: [user_id], references: [id])

  @@unique([user_id, achievement_id])
  @@index([user_id])
  @@map("user_achievements")
}

model Leaderboard {
  id         String            @id @default(uuid())
  metric     LeaderboardMetric
  period     LeaderboardPeriod
  top_users  Json
  updated_at DateTime          @updatedAt
  created_at DateTime          @default(now())

  @@unique([metric, period])
  @@map("leaderboards")
}

model Quest {
  id            String          @id @default(uuid())
  title         String
  description   String?
  icon_url      String?
  requirements  Json?
  reward_mc     Int             @default(0)
  reward_gmc    Int             @default(0)
  is_active     Boolean         @default(true)
  duration_days Int?
  created_at    DateTime        @default(now())
  updated_at    DateTime        @updatedAt
  progress      QuestProgress[]

  @@map("quests")
}

model QuestProgress {
  id           String      @id @default(uuid())
  user_id      String
  quest_id     String
  progress     Json?
  status       QuestStatus @default(NOT_STARTED)
  started_at   DateTime?
  completed_at DateTime?
  created_at   DateTime    @default(now())
  updated_at   DateTime    @updatedAt
  quest        Quest       @relation(fields: [quest_id], references: [id], onDelete: Cascade)

  @@unique([user_id, quest_id])
  @@index([user_id])
  @@index([status])
  @@map("quest_progress")
}

model RoleCompetencyMatrix {
  id                           String         @id @default(uuid())
  role_name                    String
  department_id                String?
  required_competencies        Json
  responsibilities             String[]
  permissions                  Json?
  salary_min                   Decimal?       @db.Decimal(15, 2)
  salary_max                   Decimal?       @db.Decimal(15, 2)
  purpose                      String?
  expected_results             String[]
  required_knowledge           String[]
  required_skills              String[]
  interactions                 Json?
  corporate_university_courses String[]
  golden_standard_processes    String[]
  efficiency_metrics           Json?
  lean_principles              String[]
  documents                    Json?
  created_at                   DateTime       @default(now())
  updated_at                   DateTime       @updatedAt
  employee_roles               EmployeeRole[]
  raci_matrix_entries          RaciMatrix[]
  department                   Department?    @relation(fields: [department_id], references: [id], onDelete: Cascade)

  @@unique([role_name, department_id])
  @@map("role_competency_matrix")
}

model EmployeeRole {
  id             String                @id @default(uuid())
  employee_id    String
  role_matrix_id String?
  assigned_at    DateTime              @default(now())
  effective_from DateTime              @db.Date
  effective_to   DateTime?             @db.Date
  assigned_by    String?
  is_active      Boolean               @default(true)
  created_at     DateTime              @default(now())
  assigner       User?                 @relation("RoleAssigner", fields: [assigned_by], references: [id])
  user           User                  @relation(fields: [employee_id], references: [id], onDelete: Cascade)
  role           RoleCompetencyMatrix? @relation(fields: [role_matrix_id], references: [id], onDelete: Cascade)

  @@map("employee_roles")
}

model OrgStructureHistory {
  id          String   @id @default(uuid())
  entity_type String
  entity_id   String
  action      String
  changed_by  String?
  old_data    Json?
  new_data    Json?
  reason      String?
  ip_address  String?
  user_agent  String?
  created_at  DateTime @default(now())
  changer     User?    @relation(fields: [changed_by], references: [id])

  @@map("org_structure_history")
}

model ReportingRelationship {
  id                String    @id @default(uuid())
  subordinate_id    String
  supervisor_id     String
  relationship_type String    @default("direct")
  effective_from    DateTime  @db.Date
  effective_to      DateTime? @db.Date
  is_active         Boolean   @default(true)
  created_at        DateTime  @default(now())
  subordinate       User      @relation("SubordinateRelation", fields: [subordinate_id], references: [id], onDelete: Cascade)
  supervisor        User      @relation("SupervisorRelation", fields: [supervisor_id], references: [id], onDelete: Cascade)

  @@map("reporting_relationships")
}

model OrgHierarchyLevel {
  id                String   @id @default(uuid())
  level_number      Int      @unique
  level_name        String
  level_name_ru     String
  description       String?
  can_have_children Boolean  @default(true)
  created_at        DateTime @default(now())

  @@map("org_hierarchy_levels")
}

model PyramidRole {
  id                String   @id @default(uuid())
  role_type         String
  role_name         String
  description       String?
  kpi_metrics       Json?
  interdependencies Json?
  created_at        DateTime @default(now())

  @@unique([role_type, role_name])
  @@map("pyramid_roles")
}

model TriangleAssignment {
  id            String   @id @default(uuid())
  employee_id   String
  triangle_role String
  is_primary    Boolean  @default(true)
  flow_metrics  Json?
  created_at    DateTime @default(now())
  updated_at    DateTime @updatedAt
  user          User     @relation(fields: [employee_id], references: [id], onDelete: Cascade)

  @@map("triangle_assignments")
}

model RaciMatrix {
  id           String                @id @default(uuid())
  project_name String
  task_name    String
  employee_id  String?
  role_id      String?
  raci_role    String
  description  String?
  created_at   DateTime              @default(now())
  user         User?                 @relation(fields: [employee_id], references: [id], onDelete: Cascade)
  role         RoleCompetencyMatrix? @relation(fields: [role_id], references: [id])

  @@map("raci_matrix")
}

model IdeaChannel {
  id                  String   @id @default(uuid())
  channel_type        String
  title               String
  description         String?
  submitted_by        String?
  target_level        Int?
  status              String   @default("submitted")
  priority            String?
  implementation_plan String?
  created_at          DateTime @default(now())
  updated_at          DateTime @updatedAt
  submitter           User?    @relation(fields: [submitted_by], references: [id])

  @@map("idea_channels")
}

model HybridTeamInteraction {
  id                String   @id @default(uuid())
  human_employee_id String?
  ai_agent_name     String
  interaction_type  String?
  privacy_consent   Boolean  @default(false)
  ai_mode_enabled   Boolean  @default(true)
  interaction_data  Json?
  created_at        DateTime @default(now())
  human_employee    User?    @relation(fields: [human_employee_id], references: [id], onDelete: Cascade)

  @@map("hybrid_team_interactions")
}

model Academy {
  id             String          @id @default(uuid())
  name           String          @unique
  description    String?
  icon_url       String?
  is_active      Boolean         @default(true)
  created_at     DateTime        @default(now())
  updated_at     DateTime        @updatedAt
  certifications Certification[]
  courses        Course[]
  materials      Material[]
  skills         Skill[]

  @@map("academies")
}

model Skill {
  id             String      @id @default(uuid())
  academy_id     String?
  name           String
  category       String?
  level_required String?
  kpi_impact     String?
  description    String?
  created_at     DateTime    @default(now())
  academy        Academy?    @relation(fields: [academy_id], references: [id], onDelete: Cascade)
  user_skills    UserSkill[]

  @@map("skills")
}

model Material {
  id                String         @id @default(uuid())
  type              MaterialType
  title             String
  content_url       String?
  content_text      String?
  duration_minutes  Int?
  tags              Json?
  level             String?
  academy_id        String?
  version           Int            @default(1)
  status            MaterialStatus @default(DRAFT)
  created_by        String?
  reviewed_by       String?
  created_at        DateTime       @default(now())
  updated_at        DateTime       @updatedAt
  is_video_required Boolean        @default(false)
  course_modules    CourseModule[]
  academy           Academy?       @relation(fields: [academy_id], references: [id])
  quizzes           Quiz[]

  @@map("materials")
}

model Course {
  id              String          @id @default(uuid())
  academy_id      String?
  title           String
  description     String?
  required_grade  CourseGrade?
  recognition_mc  Int             @default(0) @map("reward_mc")
  reward_gmc      Int             @default(0)
  is_mandatory    Boolean         @default(false)
  is_active       Boolean         @default(true)
  created_at      DateTime        @default(now())
  updated_at      DateTime        @updatedAt
  expected_effect String
  scope           CourseScope
  target_metric   TargetMetric
  created_by      String?
  type            DisciplineType  @default(APPLIED)
  certifications  Certification[]
  modules         CourseModule[]
  academy         Academy?        @relation(fields: [academy_id], references: [id])
  enrollments     Enrollment[]

  @@map("courses")
}

model CourseModule {
  id           String           @id @default(uuid())
  course_id    String
  material_id  String?
  module_order Int
  is_required  Boolean          @default(true)
  created_at   DateTime         @default(now())
  course       Course           @relation(fields: [course_id], references: [id], onDelete: Cascade)
  material     Material?        @relation(fields: [material_id], references: [id])
  progress     ModuleProgress[]

  @@map("course_modules")
}

model Quiz {
  id          String         @id @default(uuid())
  material_id String
  version     Int            @default(1)
  is_active   Boolean        @default(true)
  mode        QuizMode       @default(REQUIRED)
  title       String
  description String?
  pass_score  Int            @default(80)
  createdAt   DateTime       @default(now())
  updatedAt   DateTime       @updatedAt
  attempts    QuizAttempt[]
  questions   QuizQuestion[]
  material    Material       @relation(fields: [material_id], references: [id])

  @@index([material_id])
  @@map("quizzes")
}

model QuizQuestion {
  id          String       @id @default(uuid())
  quiz_id     String
  text        String
  type        String
  order       Int
  base_weight Float        @default(1.0)
  answers     QuizAnswer[]
  options     QuizOption[]
  quiz        Quiz         @relation(fields: [quiz_id], references: [id], onDelete: Cascade)

  @@map("quiz_questions")
}

model QuizOption {
  id          String       @id @default(uuid())
  question_id String
  text        String
  is_correct  Boolean      @default(false)
  question    QuizQuestion @relation(fields: [question_id], references: [id], onDelete: Cascade)

  @@map("quiz_options")
}

model QuizAttempt {
  id             String       @id @default(uuid())
  user_id        String
  quiz_id        String
  enrollment_id  String?
  raw_score      Float?
  max_score      Float?
  passed         Boolean      @default(false)
  attempt_number Int          @default(1)
  ip_address     String?
  user_agent     String?
  started_at     DateTime     @default(now())
  finished_at    DateTime?
  answers        QuizAnswer[]
  quiz           Quiz         @relation(fields: [quiz_id], references: [id])

  @@map("quiz_attempts")
}

model QuizAnswer {
  id               String       @id @default(uuid())
  attempt_id       String
  question_id      String
  selected_options String[]
  is_correct       Boolean
  earned_points    Float        @default(0)
  attempt          QuizAttempt  @relation(fields: [attempt_id], references: [id], onDelete: Cascade)
  question         QuizQuestion @relation(fields: [question_id], references: [id])

  @@map("quiz_answers")
}

model UserSkill {
  id          String    @id @default(uuid())
  user_id     String
  skill_id    String
  level       Int       @default(0)
  verified_at DateTime?
  verified_by String?
  created_at  DateTime  @default(now())
  updated_at  DateTime  @updatedAt
  skill       Skill     @relation(fields: [skill_id], references: [id])

  @@unique([user_id, skill_id])
  @@map("user_skills")
}

model UserGrade {
  id                     String      @id @default(uuid())
  user_id                String      @unique
  current_grade          CourseGrade @default(INTERN)
  motivation_coefficient Decimal     @default(0.8) @db.Decimal(3, 2)
  grade_history          Json        @default("[]")
  created_at             DateTime    @default(now())
  updated_at             DateTime    @updatedAt

  @@map("user_grades")
}

model Enrollment {
  id              String           @id @default(uuid())
  user_id         String
  course_id       String
  progress        Int              @default(0)
  status          EnrollmentStatus @default(ACTIVE)
  enrolled_at     DateTime         @default(now())
  completed_at    DateTime?
  assigned_by     String?
  course          Course           @relation(fields: [course_id], references: [id])
  module_progress ModuleProgress[]

  @@unique([user_id, course_id])
  @@map("enrollments")
}

model ModuleProgress {
  id            String       @id @default(uuid())
  enrollment_id String
  module_id     String
  status        ModuleStatus @default(NOT_STARTED)
  score         Int?
  started_at    DateTime?
  completed_at  DateTime?
  enrollment    Enrollment   @relation(fields: [enrollment_id], references: [id], onDelete: Cascade)
  module        CourseModule @relation(fields: [module_id], references: [id])

  @@map("module_progress")
}

model Certification {
  id              String       @id @default(uuid())
  user_id         String
  course_id       String?
  academy_id      String?
  level           CourseGrade?
  score           Int?
  issued_at       DateTime     @default(now())
  expires_at      DateTime?
  certificate_url String?
  academy         Academy?     @relation(fields: [academy_id], references: [id])
  course          Course?      @relation(fields: [course_id], references: [id])

  @@map("certifications")
}

model LearningPath {
  id              String   @id @default(uuid())
  user_id         String   @unique
  title           String?
  courses_planned Json?
  skills_target   Json?
  ai_generated    Boolean  @default(false)
  ai_rules        Json?
  created_at      DateTime @default(now())
  updated_at      DateTime @updatedAt

  @@map("learning_paths")
}

model Trainer {
  id                  String                 @id @default(uuid())
  user_id             String                 @unique
  specialty           TrainerSpecialty
  status              TrainerStatus          @default(CANDIDATE)
  accreditation_date  DateTime?
  rating              Decimal?               @db.Decimal(3, 2)
  trainees_total      Int                    @default(0)
  trainees_successful Int                    @default(0)
  avg_nps             Decimal?               @db.Decimal(3, 2)
  created_at          DateTime               @default(now())
  updated_at          DateTime               @updatedAt
  mentorships         MentorshipPeriod[]
  accreditations      TrainerAccreditation[]

  @@map("trainers")
}

model TrainerAccreditation {
  id         String    @id @default(uuid())
  trainer_id String
  level      String
  weight     Float     @default(1.0)
  granted_at DateTime  @default(now())
  expires_at DateTime?
  granted_by String
  is_active  Boolean   @default(true)
  trainer    Trainer   @relation(fields: [trainer_id], references: [id])

  @@map("trainer_accreditations")
}

model MentorshipPeriod {
  id              String           @id @default(uuid())
  trainer_id      String
  trainee_id      String
  status          MentorshipStatus @default(PROBATION)
  start_at        DateTime         @default(now())
  expected_end_at DateTime
  finished_at     DateTime?
  plan            Json?
  trainer         Trainer          @relation(fields: [trainer_id], references: [id])
  results         TrainingResult[]

  @@map("mentorship_periods")
}

model TrainingResult {
  id                   String           @id @default(uuid())
  kpi_improvement      Int?
  nps_score            Int?
  retention_days       Int?
  hot_leads_percentage Int?
  quality_score        Int?
  notes                String?
  created_at           DateTime         @default(now())
  mentorship_period_id String
  mentorship_period    MentorshipPeriod @relation(fields: [mentorship_period_id], references: [id], onDelete: Cascade)

  @@map("training_results")
}

model QualificationSnapshot {
  id                   String       @id @default(uuid())
  user_id              String
  previous_grade       CourseGrade?
  new_grade            CourseGrade
  photocompany_metrics Json
  stability_period     Int
  proposal_id          String?
  approved_by          String?
  approved_at          DateTime?
  reason               String
  created_at           DateTime     @default(now())

  @@index([user_id])
  @@index([new_grade])
  @@index([created_at])
  @@map("qualification_snapshots")
}

model RegistryEntity {
  urn             String   @id
  entity_type_urn String
  version         Int      @default(1)
  name            String?
  description     String?
  attributes      Json
  fsm_state       String
  is_system       Boolean  @default(false)
  is_active       Boolean  @default(true)
  created_at      DateTime @default(now())
  updated_at      DateTime @updatedAt

  @@index([entity_type_urn])
  @@index([fsm_state])
  @@map("registry_entities")
}

model RegistryAuditEvent {
  id         String   @id @default(uuid())
  entity_urn String?
  action     String
  actor_urn  String?
  payload    Json?
  created_at DateTime @default(now())

  @@index([entity_urn])
  @@map("registry_audit_events")
}

model RegistryRelationship {
  id             String   @id @default(uuid())
  definition_urn String
  from_urn       String
  to_urn         String
  attributes     Json?
  created_at     DateTime @default(now())

  @@index([definition_urn])
  @@index([from_urn])
  @@index([to_urn])
  @@map("registry_relationships")
}

model RegistryOrgProjection {
  id            String   @id @default(uuid())
  urn           String   @unique
  path          String
  depth         Int
  parent_urn    String?
  root_urn      String
  snapshot_hash String
  updated_at    DateTime @updatedAt

  @@index([path])
  @@index([parent_urn])
  @@index([root_urn])
  @@map("registry_org_projections")
}

model RegistryOwnerProjection {
  id            String   @id @default(uuid())
  owner_urn     String
  asset_urn     String
  asset_type    String
  relation_urn  String
  snapshot_hash String
  updated_at    DateTime @updatedAt

  @@unique([owner_urn, asset_urn])
  @@index([owner_urn])
  @@index([asset_type])
  @@map("registry_owner_projections")
}

model ProductionOrder {
  id             String                @id @default(uuid())
  source_type    String
  source_ref_id  String?
  product_type   String
  quantity       Int
  status         ProductionOrderStatus @default(DRAFT)
  created_at     DateTime              @default(now())
  closed_at      DateTime?
  created_by_id  String
  updated_at     DateTime              @updatedAt
  defects        Defect[]
  created_by     User                  @relation(fields: [created_by_id], references: [id])
  quality_checks QualityCheck[]
  work_orders    WorkOrder[]

  @@index([status])
  @@index([source_ref_id])
  @@map("mes_production_orders")
}

model WorkOrder {
  id                  String          @id @default(uuid())
  production_order_id String
  operation_type      String
  status              WorkOrderStatus @default(PENDING)
  sequence_order      Int
  started_at          DateTime?
  finished_at         DateTime?
  assigned_to_id      String?
  created_at          DateTime        @default(now())
  updated_at          DateTime        @updatedAt
  quality_checks      QualityCheck[]
  assigned_to         User?           @relation(fields: [assigned_to_id], references: [id])
  production_order    ProductionOrder @relation(fields: [production_order_id], references: [id], onDelete: Cascade)

  @@index([production_order_id])
  @@index([status])
  @@map("mes_work_orders")
}

model QualityCheck {
  id                  String           @id @default(uuid())
  production_order_id String
  work_order_id       String?
  check_type          QualityCheckType
  result              QualityResult
  created_by_id       String
  created_at          DateTime         @default(now())
  comments            String?
  defects             Defect[]
  created_by          User             @relation(fields: [created_by_id], references: [id])
  production_order    ProductionOrder  @relation(fields: [production_order_id], references: [id])
  work_order          WorkOrder?       @relation(fields: [work_order_id], references: [id])

  @@index([production_order_id])
  @@map("mes_quality_checks")
}

model Defect {
  id                  String          @id @default(uuid())
  production_order_id String
  quality_check_id    String?
  defect_type         String
  severity            DefectSeverity
  root_cause          String?
  requires_rework     Boolean         @default(false)
  resolved            Boolean         @default(false)
  registered_by_id    String
  registered_at       DateTime        @default(now())
  updated_at          DateTime        @updatedAt
  production_order    ProductionOrder @relation(fields: [production_order_id], references: [id])
  quality_check       QualityCheck?   @relation(fields: [quality_check_id], references: [id])
  registered_by       User            @relation(fields: [registered_by_id], references: [id])

  @@index([production_order_id])
  @@index([resolved])
  @@map("mes_defects")
}

model CanonicalViolation {
  id         String    @id @default(uuid())
  canon      CanonType
  violation  String
  source     String
  action     String
  payload    Json?
  user_id    String?
  created_at DateTime  @default(now())

  @@index([canon, created_at])
  @@index([violation])
  @@map("canonical_violations")
}

model EconomyAuditLog {
  id          String   @id @default(uuid())
  event_id    String   @unique
  event_type  String
  occurred_at DateTime
  actor_id    String
  actor_role  String
  user_id     String?
  context_id  String?  @map("usage_context_id")
  payload     Json
  created_at  DateTime @default(now())

  @@index([user_id])
  @@index([event_type])
  @@index([context_id])
  @@map("economy_audit_logs")
}

model RewardEligibility {
  id           String    @id @default(uuid())
  user_id      String
  event_type   String
  event_ref_id String
  mc_amount    Int
  status       String    @default("PENDING")
  processed_at DateTime?
  audit_flag   String?
  created_at   DateTime  @default(now())
  user         User      @relation(fields: [user_id], references: [id])

  @@unique([user_id, event_type, event_ref_id])
  @@index([status])
  @@index([created_at])
  @@map("economy_reward_eligibility")
}

model MatrixCoinSnapshot {
  id            String   @id @default(uuid())
  snapshot_id   String   @unique
  user_id       String
  total_amount  Decimal  @db.Decimal(20, 8)
  mc_state_json Json
  captured_at   DateTime
  created_at    DateTime @default(now())

  @@index([user_id, captured_at])
  @@map("matrixcoin_snapshots")
}

model AuctionEventState {
  id            String   @id @default(uuid())
  event_id      String   @unique
  status        String
  state_payload Json
  updated_at    DateTime @updatedAt
  created_at    DateTime @default(now())

  @@index([status])
  @@map("auction_event_states")
}

model GovernanceFlag {
  id           String    @id @default(uuid())
  flag_id      String    @unique
  user_id      String
  context_id   String
  review_level String
  status       String
  reason       String
  payload      Json
  flagged_at   DateTime
  resolved_at  DateTime?
  created_at   DateTime  @default(now())

  @@index([status])
  @@index([review_level])
  @@map("economy_governance_flags")
}

model AIFeedback {
  id                String       @id @default(uuid())
  recommendationId  String
  userId            String
  feedbackType      FeedbackType
  comment           String?      @db.VarChar(500)
  basedOnSnapshotId String?
  aiVersion         String?
  ruleSetVersion    String?
  timestamp         DateTime     @default(now())
  user              User         @relation(fields: [userId], references: [id])

  @@unique([userId, recommendationId])
  @@index([recommendationId])
  @@index([feedbackType])
  @@index([timestamp])
  @@map("ai_feedback")
}

model ParticipationStatus {
  code             String                    @id
  description      String
  governance_flags Json?
  is_active        Boolean                   @default(true)
  created_at       DateTime                  @default(now())
  updated_at       DateTime                  @updatedAt
  user_statuses    UserParticipationStatus[]

  @@map("participation_statuses")
}

model UserParticipationStatus {
  id          String              @id @default(uuid())
  user_id     String              @unique
  status_code String
  assigned_at DateTime            @default(now())
  assigned_by String
  reason      String
  status      ParticipationStatus @relation(fields: [status_code], references: [code])
  user        User                @relation(fields: [user_id], references: [id])

  @@index([status_code])
  @@index([assigned_at])
  @@map("user_participation_statuses")
}

model ParticipationStatusHistory {
  id         String   @id @default(uuid())
  user_id    String
  old_status String?
  new_status String
  reason     String
  changed_at DateTime @default(now())
  changed_by String
  user       User     @relation(fields: [user_id], references: [id])

  @@index([user_id])
  @@index([changed_at])
  @@map("participation_status_history")
}

model ParticipationRank {
  code        String                  @id
  conditions  Json
  description String
  is_active   Boolean                 @default(true)
  created_at  DateTime                @default(now())
  updated_at  DateTime                @updatedAt
  user_ranks  UserParticipationRank[]

  @@map("participation_ranks")
}

model UserParticipationRank {
  id            String            @id @default(uuid())
  user_id       String            @unique
  rank_code     String
  calculated_at DateTime          @default(now())
  rank          ParticipationRank @relation(fields: [rank_code], references: [code])
  user          User              @relation(fields: [user_id], references: [id])

  @@index([rank_code])
  @@index([calculated_at])
  @@map("user_participation_ranks")
}

model HRDomainEvent {
  id            String          @id @default(uuid())
  eventType     HREventType
  aggregateType HRAggregateType
  aggregateId   String
  actorId       String
  actorRole     String
  payload       Json
  previousState Json?
  newState      Json?
  legalBasis    String?
  occurredAt    DateTime        @default(now())

  @@index([aggregateId, eventType])
  @@index([occurredAt])
  @@map("hr_domain_events")
}

model PersonalFile {
  id         String              @id @default(uuid())
  employeeId String              @unique
  fileNumber String              @unique
  hrStatus   HRStatus            @default(ONBOARDING)
  createdAt  DateTime            @default(now())
  closedAt   DateTime?
  archivedAt DateTime?
  archiveId  String?
  contracts  LaborContract[]
  employee   Employee            @relation(fields: [employeeId], references: [id])
  documents  PersonnelDocument[]
  orders     PersonnelOrder[]

  @@map("personal_files")
}

model PersonnelDocument {
  id                String                @id @default(uuid())
  personalFileId    String
  documentType      PersonnelDocumentType
  title             String
  description       String?
  fileId            String
  fileName          String
  fileSize          Int
  mimeType          String
  issueDate         DateTime?
  expiryDate        DateTime?
  issuer            String?
  documentNumber    String?
  uploadedById      String
  createdAt         DateTime              @default(now())
  updatedAt         DateTime              @updatedAt
  libraryDocumentId String?
  personalFile      PersonalFile          @relation(fields: [personalFileId], references: [id])

  @@map("personnel_documents")
}

model PersonnelOrder {
  id             String             @id @default(uuid())
  personalFileId String
  orderType      PersonnelOrderType
  orderNumber    String             @unique
  orderDate      DateTime
  effectiveDate  DateTime
  title          String
  content        String
  basis          String?
  fileId         String?
  signedById     String?
  signedAt       DateTime?
  status         OrderStatus        @default(DRAFT)
  createdById    String
  createdAt      DateTime           @default(now())
  updatedAt      DateTime           @updatedAt
  retentionYears Int                @default(75)
  personalFile   PersonalFile       @relation(fields: [personalFileId], references: [id])

  @@map("personnel_orders")
}

model LaborContract {
  id                String              @id @default(uuid())
  personalFileId    String
  contractNumber    String              @unique
  contractDate      DateTime
  startDate         DateTime
  endDate           DateTime?
  contractType      ContractType
  positionId        String
  departmentId      String
  salary            Decimal             @db.Decimal(12, 2)
  salaryType        ContractSalaryType  @default(MONTHLY)
  workSchedule      String
  probationDays     Int                 @default(0)
  fileId            String?
  status            ContractStatus      @default(ACTIVE)
  terminationDate   DateTime?
  terminationReason String?
  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt
  amendments        ContractAmendment[]
  personalFile      PersonalFile        @relation(fields: [personalFileId], references: [id])

  @@map("labor_contracts")
}

model ContractAmendment {
  id              String        @id @default(uuid())
  contractId      String
  amendmentNumber Int
  amendmentDate   DateTime
  effectiveDate   DateTime
  changes         Json
  fileId          String?
  createdAt       DateTime      @default(now())
  contract        LaborContract @relation(fields: [contractId], references: [id])

  @@map("contract_amendments")
}

model DocumentTemplate {
  id           String       @id @default(uuid())
  templateType TemplateType
  name         String
  description  String?
  content      String
  variables    Json
  isActive     Boolean      @default(true)
  version      Int          @default(1)
  createdAt    DateTime     @default(now())
  updatedAt    DateTime     @updatedAt

  @@map("document_templates")
}

model LibraryDocument {
  id                String                   @id @default(uuid())
  title             String
  documentType      String
  logicalOwner      String                   @default("LIBRARY")
  businessOwnerRole String
  status            DocumentStatus           @default(DRAFT)
  currentVersionId  String?                  @unique
  createdAt         DateTime                 @default(now())
  updatedAt         DateTime                 @updatedAt
  versions          LibraryDocumentVersion[] @relation("AllVersions")
  currentVersion    LibraryDocumentVersion?  @relation("CurrentVersion", fields: [currentVersionId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  links             LibraryLink[]

  @@index([status])
  @@index([documentType])
  @@map("library_documents")
}

model LibraryDocumentVersion {
  id                  String           @id @default(uuid())
  documentId          String
  version             String
  storageRef          String
  checksum            String
  fileSizeBytes       BigInt
  mimeType            String
  createdByEmployeeId String
  createdAt           DateTime         @default(now())
  document            LibraryDocument  @relation("AllVersions", fields: [documentId], references: [id], onDelete: Cascade)
  currentVersionOf    LibraryDocument? @relation("CurrentVersion")

  @@unique([documentId, version])
  @@index([documentId])
  @@map("library_document_versions")
}

model LibraryLink {
  id             String          @id @default(uuid())
  documentId     String
  linkedModule   String
  linkedEntityId String
  linkType       LinkType
  createdAt      DateTime        @default(now())
  document       LibraryDocument @relation(fields: [documentId], references: [id], onDelete: Cascade)

  @@index([documentId])
  @@index([linkedModule, linkedEntityId])
  @@map("library_links")
}

model FoundationAcceptance {
  id          String             @id @default(uuid())
  person_id   String             @unique
  version     String
  decision    FoundationDecision
  accepted_at DateTime           @default(now())
  valid_until DateTime?
  user        User               @relation(fields: [person_id], references: [id])

  @@map("foundation_acceptances")
}

model FoundationAuditLog {
  id                 String   @id @default(uuid())
  user_id            String
  metadata           Json?
  event_type         String
  foundation_version String?
  timestamp          DateTime @default(now())

  @@index([user_id])
  @@index([timestamp])
  @@map("foundation_audit_logs")
}

model Location {
  id         String   @id @default(uuid())
  name       String   @unique
  city       String?
  address    String?
  is_active  Boolean  @default(true)
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("locations")
}

model Position {
  id         String   @id @default(uuid())
  name       String   @unique
  is_active  Boolean  @default(true)
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("positions")
}

model AuthSession {
  id         String            @id @default(uuid())
  user_id    String
  ip_address String?
  user_agent String?
  expires_at DateTime
  created_at DateTime          @default(now())
  updated_at DateTime          @updatedAt
  status     AuthSessionStatus @default(PENDING)
  user       User              @relation(fields: [user_id], references: [id])

  @@map("auth_sessions")
}

model EmployeeRegistrationRequest {
  id                   String                    @id @default(uuid())
  telegram_id          String                    @unique
  telegram_username    String?
  photo_url            String?
  first_name           String?
  last_name            String?
  middle_name          String?
  birth_date           DateTime?                 @db.Date
  registration_address String?
  residential_address  String?
  addresses_match      Boolean                   @default(false)
  phone                String?
  email                String?                   @unique
  position             String?
  location_id          String?
  department_id        String?
  passport_scan_url    String?
  additional_documents Json?                     @default("[]")
  invited_by           String?
  reviewed_by          String?
  reviewed_at          DateTime?
  rejection_reason     String?
  invitation_sent_at   DateTime?
  completed_at         DateTime?
  created_at           DateTime                  @default(now())
  updated_at           DateTime                  @updatedAt
  status               RegistrationStatus        @default(PENDING)
  current_step         RegistrationStep          @default(PHOTO)
  step_history         RegistrationStepHistory[]

  @@map("employee_registration_requests")
}

model RegistrationStepHistory {
  id              String                      @id @default(uuid())
  registration_id String
  data            Json?
  completed_at    DateTime                    @default(now())
  step            RegistrationStep
  registration    EmployeeRegistrationRequest @relation(fields: [registration_id], references: [id], onDelete: Cascade)

  @@index([registration_id])
  @@map("registration_step_history")
}

enum QuizMode {
  OPTIONAL
  REQUIRED
  DIAGNOSTIC
}

enum MentorshipStatus {
  PROBATION
  ACTIVE
  COMPLETED
  FAILED
}

enum UserRole {
  ADMIN
  HR_MANAGER
  DEPARTMENT_HEAD
  BRANCH_MANAGER
  EMPLOYEE
}

enum UserStatus {
  ACTIVE
  INACTIVE
  SUSPENDED
}

enum EventType {
  SHIFT_STARTED
  SHIFT_COMPLETED
  KPI_RECORDED
  FEEDBACK_SUBMITTED
  COURSE_COMPLETED
  TEST_PASSED
  MENTORING_COMPLETED
  QUALIFICATION_PROPOSED
  QUALIFICATION_CHANGED
  REWARD_GRANTED
  TASK_CREATED
  TASK_COMPLETED
  TRANSACTION_CREATED
  PHOTOCOMPANY_RESULT
  QUIZ_COMPLETED
  MENTORSHIP_COMPLETED
}

enum EmployeeStatus {
  UNIVERSE
  STAR
  FLINT_CARBON
  TOPCHIK
  PHOTON
}

enum EmployeeRank {
  COLLECTOR
  INVESTOR
  MAGNATE
}

enum TaskStatus {
  TODO
  IN_PROGRESS
  REVIEW
  DONE
  ARCHIVED
}

enum TaskPriority {
  LOW
  MEDIUM
  HIGH
  URGENT
}

enum Currency {
  MC
  GMC
  RUB
}

enum TransactionType {
  EARN
  SPEND
  TRANSFER
  REWARD
  PENALTY
  AUCTION_BID
  AUCTION_WIN
  STORE_PURCHASE
  SAFE_ACTIVATION
}

enum PurchaseStatus {
  COMPLETED
  PENDING_APPROVAL
  REJECTED
  ROLLED_BACK
}

enum LeaderboardMetric {
  MC_BALANCE
  GMC_BALANCE
  COMPLETED_TASKS
  STATUS_LEVEL
}

enum LeaderboardPeriod {
  WEEK
  MONTH
  ALL_TIME
}

enum QuestStatus {
  NOT_STARTED
  IN_PROGRESS
  COMPLETED
  ABANDONED
}

enum MaterialType {
  VIDEO
  TEXT
  PDF
  QUIZ
  SIMULATION
}

enum MaterialStatus {
  DRAFT
  REVIEW
  PUBLISHED
}

enum CourseGrade {
  INTERN
  SPECIALIST
  PROFESSIONAL
  EXPERT
  MASTER
}

enum EnrollmentStatus {
  ACTIVE
  COMPLETED
  ABANDONED
}

enum ModuleStatus {
  NOT_STARTED
  IN_PROGRESS
  COMPLETED
}

enum TrainerSpecialty {
  PHOTOGRAPHER
  SALES
  DESIGNER
}

enum TrainerStatus {
  CANDIDATE
  TRAINER
  ACCREDITED
  SENIOR
  METHODOLOGIST
}

enum AssignmentStatus {
  ACTIVE
  COMPLETED
  CANCELLED
}

enum TargetMetric {
  OKK
  CK
  CONVERSION
  QUALITY
  RETOUCH_TIME
  AVG_CHECK
  ANOMALIES
}

enum CourseScope {
  PHOTOGRAPHER
  SALES
  RETOUCH
  GENERAL
}

enum DisciplineType {
  FOUNDATIONAL
  APPLIED
}

enum ProductionOrderStatus {
  DRAFT
  PLANNED
  IN_PROGRESS
  ON_HOLD
  COMPLETED
  CANCELLED
}

enum WorkOrderStatus {
  PENDING
  IN_PROGRESS
  COMPLETED
}

enum QualityCheckType {
  VISUAL
  MEASUREMENT
  FUNCTIONAL
}

enum QualityResult {
  PASS
  FAIL
}

enum DefectSeverity {
  MINOR
  MAJOR
  CRITICAL
}

enum CanonType {
  MC
  GMC
}

enum FeedbackType {
  HELPFUL
  NOT_APPLICABLE
  UNSURE
}

enum HREventType {
  EMPLOYEE_HIRED
  EMPLOYEE_TRANSFERRED
  EMPLOYEE_PROMOTED
  EMPLOYEE_DEMOTED
  EMPLOYEE_SUSPENDED
  EMPLOYEE_DISMISSED
  DOCUMENT_UPLOADED
  DOCUMENT_VERIFIED
  DOCUMENT_EXPIRED
  ORDER_CREATED
  ORDER_SIGNED
  ORDER_CANCELLED
  CONTRACT_SIGNED
  CONTRACT_AMENDED
  CONTRACT_TERMINATED
  FILE_ARCHIVED
}

enum HRAggregateType {
  PERSONAL_FILE
  PERSONNEL_ORDER
  LABOR_CONTRACT
  PERSONNEL_DOCUMENT
}

enum HRStatus {
  ONBOARDING
  PROBATION
  EMPLOYED
  SUSPENDED
  LEAVE
  TERMINATED
  ARCHIVED
}

enum PersonnelDocumentType {
  PASSPORT
  SNILS
  INN
  EDUCATION_DIPLOMA
  MILITARY_ID
  WORK_BOOK
  PHOTO
  MEDICAL_BOOK
  DRIVING_LICENSE
  CERTIFICATE
  REFERENCE_LETTER
  NDA
  PD_CONSENT
  JOB_DESCRIPTION
  OTHER
}

enum PersonnelOrderType {
  HIRING
  TRANSFER
  VACATION
  VACATION_CANCEL
  BUSINESS_TRIP
  BONUS
  SALARY_CHANGE
  DISCIPLINARY
  DISCIPLINARY_REMOVE
  DISMISSAL
  POSITION_CHANGE
  SCHEDULE_CHANGE
  LEAVE_WITHOUT_PAY
  MATERNITY_LEAVE
  PARENTAL_LEAVE
}

enum OrderStatus {
  DRAFT
  PENDING_APPROVAL
  APPROVED
  SIGNED
  CANCELLED
}

enum ContractType {
  PERMANENT
  FIXED_TERM
  PART_TIME
  CIVIL
  INTERNSHIP
}

enum ContractStatus {
  ACTIVE
  SUSPENDED
  TERMINATED
}

enum ContractSalaryType {
  MONTHLY
  HOURLY
  PIECEWORK
}

enum TemplateType {
  LABOR_CONTRACT
  ORDER_HIRING
  ORDER_DISMISSAL
  ORDER_VACATION
  ORDER_TRANSFER
  CERTIFICATE_WORK
  NDA
  PD_CONSENT
}

enum DocumentStatus {
  DRAFT
  ACTIVE
  ARCHIVED
  DESTROYED
}

enum LinkType {
  REFERENCE
  MANDATORY
  EDUCATIONAL
}

enum FoundationDecision {
  ACCEPTED
  NOT_ACCEPTED
  REVOKED
}

enum FoundationStatus {
  NOT_STARTED
  IN_PROGRESS
  ACCEPTED

  @@map("foundation_status")
}

enum RegistrationStatus {
  PENDING
  IN_PROGRESS
  DOCUMENTS_PENDING
  REVIEW
  APPROVED
  REJECTED

  @@map("registration_status")
}

enum RegistrationStep {
  PHOTO
  FULL_NAME
  BIRTH_DATE
  REG_ADDRESS
  RES_ADDRESS
  PHONE
  EMAIL
  POSITION
  LOCATION
  PASSPORT_SCAN
  DOCUMENTS
  COMPLETED

  @@map("registration_step")
}

enum AuthSessionStatus {
  PENDING
  APPROVED
  REJECTED
  EXPIRED

  @@map("auth_session_status")
}


