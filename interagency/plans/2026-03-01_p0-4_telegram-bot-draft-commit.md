# PLAN ‚Äî –ü–æ–¥–∫–ª—é—á–∏—Ç—å apps/telegram-bot –∫ Agro Draft‚ÜíCommit
–î–∞—Ç–∞: 2026-03-01  
–°—Ç–∞—Ç—É—Å: draft  
Decision-ID: AG-TELEGRAM-DRAFT-COMMIT-001  

## –†–µ–∑—É–ª—å—Ç–∞—Ç (–∫–∞–∫–æ–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –ø–æ–ª—É—á–∏–º)
- –ò—Å–ø–æ–ª–Ω–∏–º—ã–π –ø–ª–∞–Ω –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è `apps/telegram-bot` –∫ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–º—É –¥–æ–º–µ–Ω–Ω–æ–º—É API Draft‚ÜíCommit –≤ `apps/api` (P0.3), –±–µ–∑ —Ä–∞–∑–¥–≤–æ–µ–Ω–∏—è —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–æ–Ω—Ç—É—Ä–æ–≤.
- –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π scope –¥–ª—è –±–æ—Ç–∞: intake (text/voice/photo) ‚Üí create draft ‚Üí –æ—Ç–≤–µ—Ç —Å –∫–Ω–æ–ø–∫–∞–º–∏ ‚úÖ‚úèÔ∏èüîó (–≤–µ–∑–¥–µ `draftId`) ‚Üí –≤—ã–∑–æ–≤—ã `fix/link/confirm`.

## –ì—Ä–∞–Ω–∏—Ü—ã (—á—Ç–æ –≤—Ö–æ–¥–∏—Ç / —á—Ç–æ –ù–ï –≤—Ö–æ–¥–∏—Ç)
- –í—Ö–æ–¥–∏—Ç: –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `apps/telegram-bot` –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è draft-–ø–æ—Ç–æ–∫–∞ –∏ –≤—ã–∑–æ–≤–æ–≤ API; —Ñ–æ—Ä–º–∞—Ç callback data; –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥–æ–Ω —Å—Ü–µ–Ω–∞—Ä–∏—è —Å –ª–æ–≥–∞–º–∏.
- –ù–µ –≤—Ö–æ–¥–∏—Ç: –ª—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–º–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏ Draft‚ÜíCommit (–æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –∂–∏—Ç—å –≤ `apps/api`); UI-–ø–æ–ª–∏—Ä–æ–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤; –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–æ–Ω—Ç—É—Ä—ã.
- –ù–µ –≤—Ö–æ–¥–∏—Ç: `commit/push` –∏ –æ—Ç–º–µ—Ç–∫–∏ —á–µ–∫–ª–∏—Å—Ç–æ–≤/memory-bank –¥–æ –≤–Ω–µ—à–Ω–µ–≥–æ —Ä–µ–≤—å—é.
- –ù–µ –≤—Ö–æ–¥–∏—Ç: –ª—é–±—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å tenant —á–µ—Ä–µ–∑ `companyId` –∏–∑ callback/body; –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–π auth/session-–∫–æ–Ω—Ç–µ–∫—Å—Ç API.

## –†–∏—Å–∫–∏ (—á—Ç–æ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏ –Ω–µ —Ç–∞–∫)
- –ö–æ–Ω—Ç—Ä–∞–∫—Ç API –ø–æ Draft‚ÜíCommit –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –≤ —Ö–æ–¥–µ P0.3 ‚Üí —Ä–∏—Å–∫ –ø–µ—Ä–µ–¥–µ–ª–∫–∏ –±–æ—Ç–∞, –µ—Å–ª–∏ —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å –∫–æ–¥ –¥–æ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏.
- Security-—Ä–∏—Å–∫: —Å–ª—É—á–∞–π–Ω–æ –ø—Ä–æ—Ç–∞—â–∏—Ç—å `companyId` –∏–∑ callback/body –∏–ª–∏ ‚Äú–ø–æ—á–∏–Ω–∏—Ç—å‚Äù –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ —Ö–∞—Ä–¥–∫–æ–¥.
- Callback data –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—Å–∏—Ç—å –ª–∏–º–∏—Ç—ã Telegram –∏–ª–∏ –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É—Å—Ç–æ–π—á–∏–≤–æ–π –∫ –∫–æ–ª–ª–∏–∑–∏—è–º ‚Üí –Ω—É–∂–µ–Ω –∫–æ—Ä–æ—Ç–∫–∏–π —Ñ–æ—Ä–º–∞—Ç.
- Admission-—Ä–∏—Å–∫: –µ—Å–ª–∏ `Decision-ID` –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `ACCEPTED`, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ —è–≤–Ω–æ–≥–æ –¥–æ–ø—É—Å–∫–∞.

## –ü–ª–∞–Ω —Ä–∞–±–æ—Ç (–∫–æ—Ä–æ—Ç–∫–æ, –∏—Å–ø–æ–ª–Ω–∏–º–æ)
- [ ] –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å, —á—Ç–æ `Decision-ID` `AG-TELEGRAM-DRAFT-COMMIT-001` –∏–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å `ACCEPTED` –∏ –µ–≥–æ scope –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ `apps/telegram-bot` –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ Telegram-—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞; –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é.
- [ ] –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏–µ endpoints/–∫–æ–Ω—Ç—Ä–∞–∫—Ç P0.3, –∫–æ—Ç–æ—Ä—ã–µ –±–æ—Ç –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å: `create draft`, `fix`, `link`, `confirm` (–∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ `missingMust[]`); –µ—Å–ª–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç P0.3 –Ω–µ —Å—Ç–∞–±–∏–ª–µ–Ω, –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –¥–æ –µ–≥–æ —Ñ–∏–∫—Å–∞—Ü–∏–∏.
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç callback data (–∫–æ—Ä–æ—Ç–∫–æ –∏ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ): `agro:<action>:<draftId>`, –≥–¥–µ `action ‚àà {confirm, fix, link}`.
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å intake:
  - [ ] text ‚Üí create draft
  - [ ] photo ‚Üí create draft —Å `evidence=photo` / metadata –ø–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É API
  - [ ] voice ‚Üí create draft —Å `evidence=audio` (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ, –±–µ–∑ ASR, –µ—Å–ª–∏ –≤–Ω–µ scope)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫:
  - [ ] ‚úÖ confirm ‚Üí API confirm; –µ—Å–ª–∏ `missingMust[]` –Ω–µ –ø—É—Å—Ç ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å MUST-–≤–æ–ø—Ä–æ—Å—ã; –∏–Ω–∞—á–µ –ø–æ–∫–∞–∑–∞—Ç—å ‚Äúcommitted‚Äù.
  - [ ] üîó link ‚Üí —Å–æ–±—Ä–∞—Ç—å refs (–ø–æ–ª–µ/–∑–∞–¥–∞—á–∞/—Ñ–µ—Ä–º–∞) –∏ –≤—ã–∑–≤–∞—Ç—å API link.
  - [ ] ‚úèÔ∏è fix ‚Üí —Å–æ–±—Ä–∞—Ç—å patch (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ) –∏ –≤—ã–∑–≤–∞—Ç—å API fix.
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥–æ–Ω: ‚Äú—Ñ–æ—Ç–æ+—Ç–µ–∫—Å—Ç ‚Üí draft ‚Üí link ‚Üí confirm ‚Üí committed‚Äù —Å –ª–æ–≥–∞–º–∏ (–∏–ª–∏ e2e).

## DoD
- [ ] `apps/telegram-bot` —Å–æ–∑–¥–∞—ë—Ç draft –¥–ª—è text/voice/photo –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ ‚úÖ‚úèÔ∏èüîó —Å `draftId`.
- [ ] –í—Å–µ callback‚Äô–∏ –Ω–µ—Å—É—Ç `draftId`; –ø–æ –Ω–∞–∂–∞—Ç–∏—é –∏–¥—É—Ç –≤—ã–∑–æ–≤—ã `fix/link/confirm`.
- [ ] Tenant isolation —Å–æ–±–ª—é–¥—ë–Ω: `companyId` –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞; –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–æ–≤–µ—Ä–µ–Ω–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è/—Å–µ—Å—Å–∏—è.
- [ ] `apps/telegram-bot` –æ—Å—Ç–∞—ë—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º Telegram-—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º; –Ω–æ–≤—ã–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—É—Ä –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è.
- [ ] –ï—Å—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–π –ø—Ä–æ–≥–æ–Ω —Å—Ü–µ–Ω–∞—Ä–∏—è —Å –ª–æ–≥–∞–º–∏.
