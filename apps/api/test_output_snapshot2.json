{"numFailedTestSuites":1,"numFailedTests":1,"numPassedTestSuites":0,"numPassedTests":4,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":1,"numTotalTests":5,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1771544903882,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["SnapshotService"],"duration":224,"failureDetails":[],"failureMessages":[],"fullName":"SnapshotService should be defined","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should be defined"},{"ancestorTitles":["SnapshotService"],"duration":243,"failureDetails":[],"failureMessages":[],"fullName":"SnapshotService [S2] creates a valid DAG node and updates head","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"[S2] creates a valid DAG node and updates head"},{"ancestorTitles":["SnapshotService"],"duration":70,"failureDetails":[{"response":{"message":"Invalid snapshot DAG continuity","error":"Conflict","statusCode":409},"status":409,"options":{},"message":"Invalid snapshot DAG continuity","name":"ConflictException"}],"failureMessages":["ConflictException: Invalid snapshot DAG continuity\n    at SnapshotService.validateIncomingSnapshot (F:\\RAI_EP\\apps\\api\\src\\level-f\\snapshot\\snapshot.service.ts:107:19)\n    at Object.<anonymous> (F:\\RAI_EP\\apps\\api\\test\\level-f\\snapshot.service.spec.ts:61:24)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"SnapshotService [S3] Temporal consistency: validates valid skew","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"[S3] Temporal consistency: validates valid skew"},{"ancestorTitles":["SnapshotService"],"duration":40,"failureDetails":[],"failureMessages":[],"fullName":"SnapshotService [S3] Temporal consistency: rejects too large skew","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"[S3] Temporal consistency: rejects too large skew"},{"ancestorTitles":["SnapshotService"],"duration":74,"failureDetails":[],"failureMessages":[],"fullName":"SnapshotService [S2] DAG Continuity: rejects invalid previous hash","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"[S2] DAG Continuity: rejects invalid previous hash"}],"endTime":1771544976010,"message":"  ● SnapshotService › [S3] Temporal consistency: validates valid skew\n\n    ConflictException: Invalid snapshot DAG continuity\n\n    \u001b[0m \u001b[90m 105 |\u001b[39m         \u001b[36mif\u001b[39m (node\u001b[33m.\u001b[39mpayload\u001b[33m.\u001b[39mpreviousHash \u001b[33m!==\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mdagHeadHash) {\n     \u001b[90m 106 |\u001b[39m             \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mlogger\u001b[33m.\u001b[39merror(\u001b[32m`DAG Continuity Error: Invalid previous hash. Received: ${node.payload.previousHash}, Expected: ${this.dagHeadHash}`\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 107 |\u001b[39m             \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mConflictException\u001b[39m(\u001b[32m'Invalid snapshot DAG continuity'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 108 |\u001b[39m         }\n     \u001b[90m 109 |\u001b[39m\n     \u001b[90m 110 |\u001b[39m         \u001b[90m// Проверка хэша\u001b[39m\u001b[0m\n\n      at SnapshotService.validateIncomingSnapshot (src/level-f/snapshot/snapshot.service.ts:107:19)\n      at Object.<anonymous> (test/level-f/snapshot.service.spec.ts:61:24)\n","name":"F:\\RAI_EP\\apps\\api\\test\\level-f\\snapshot.service.spec.ts","startTime":1771544905625,"status":"failed","summary":""}],"wasInterrupted":false}
