# RAI_EP ‚Äî Agent-First / Chat-First Spec (v1)
–î–∞—Ç–∞: 2026-02-28  
–°—Ç–∞—Ç—É—Å: LAW (–∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–∞–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

---

## 0. Product Law
**RAI ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç–Ω—ã–π –∞–≥—Ä–æ-–æ–ø–µ—Ä–∞—Ç–æ—Ä.**  
–ì–ª–∞–≤–Ω—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —Å–∏—Å—Ç–µ–º—ã: **TechMap (–¢–µ—Ö–∫–∞—Ä—Ç–∞) –ø–æ –∫–∞–∂–¥–æ–º—É –ø–æ–ª—é** ‚Äî –∏—Å–ø–æ–ª–Ω—è–µ–º–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å–µ–∑–æ–Ω–∞ (–ø–æ –≤—Ä–µ–º–µ–Ω–∏, –æ–ø–µ—Ä–∞—Ü–∏—è–º, —ç–∫–æ–Ω–æ–º–∏–∫–µ, —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω—ã–º –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞–º).  
CRM/–∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã/—Å–∫–ª–∞–¥/—Ñ–∏–Ω–∞–Ω—Å—ã/–¥–∞—à–±–æ—Ä–¥—ã ‚Äî –æ–±—Å–ª—É–∂–∏–≤–∞—é—â–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–æ–∫—Ä—É–≥ TechMap.

**–¶–µ–ª—å:** –º–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏—è —É—Ä–æ–∂–∞—è ‚Üí –º–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–∏–±—ã–ª–∏ –∫–ª–∏–µ–Ω—Ç–∞ ‚Üí performance-–¥–æ—Ö–æ–¥ RAI –ø—Ä–∏ –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–¥–∞ –ø—Ä–∏—Ä–æ–¥–µ.

---

## 1. Interaction Law (2026)
### 1.1 Telegram = Field Terminal (Free Chat)
Telegram ‚Äî —Å–≤–æ–±–æ–¥–Ω—ã–π —á–∞—Ç + –≥–æ–ª–æ—Å + —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ.  
**–ú–∏–Ω–∏–º—É–º –∫–Ω–æ–ø–æ–∫ –∏ –∫–æ–º–∞–Ω–¥.** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç/–≥–æ–≤–æ—Ä–∏—Ç ‚Äú–∫–∞–∫ —á–µ–ª–æ–≤–µ–∫—É‚Äù.

–ê–≥–µ–Ω—Ç –æ–±—è–∑–∞–Ω:
1) –ø—Ä–µ–≤—Ä–∞—â–∞—Ç—å –ª—é–±–æ–π –≤—Ö–æ–¥ –≤ **EventDraft** (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —á–µ—Ä–Ω–æ–≤–∏–∫),
2) –∑–∞–¥–∞–≤–∞—Ç—å **—Ç–æ–ª—å–∫–æ MUST-—É—Ç–æ—á–Ω–µ–Ω–∏—è** (1‚Äì2 –≤–æ–ø—Ä–æ—Å–∞ –∑–∞ —à–∞–≥),
3) —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ **—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Confirm**.

**–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏:**
- ‚úÖ Confirm (commit)
- ‚úèÔ∏è Fix (—É—Ç–æ—á–Ω–∏—Ç—å/–∏—Å–ø—Ä–∞–≤–∏—Ç—å)
- üîó Link (–ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ –ø–æ–ª—é/–∑–∞–¥–∞—á–µ/—Ö–æ–∑—è–π—Å—Ç–≤—É)

### 1.2 Control Plane Web (Minimal)
–û–¥–∏–Ω —ç–∫—Ä–∞–Ω: **Chat + Reactive Panel**  
- Left: chat (–ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
- Right: —Ä–µ–Ω–¥–µ—Ä ‚Äú—Å–∏—Ç—É–∞—Ç–∏–≤–Ω—ã—Ö –≤–∏–¥–∂–µ—Ç–æ–≤‚Äù –∏–∑ structured payload –∞–≥–µ–Ω—Ç–∞

UI –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è:
- Map/NDVI (–≥–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ)
- Mass Import (CSV/Excel)
- External Reports (PDF/—Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –±–∞–Ω–∫–æ–≤/–ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤)
- Rare Settings / Approvals Inbox

---

## 2. Core Agents (v1)
### 2.1 SupervisorAgent (Orchestrator)
- –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ–Ω—Ç–æ–≤ –∫ –ø–æ–¥-–∞–≥–µ–Ω—Ç–∞–º
- enforcement RBAC + RiskGate
- –∑–∞–ø—É—Å–∫ Quorum/TechCouncil –ø—Ä–∏ R3/R4 –∏–ª–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è—Ö
- –µ–¥–∏–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª explainability (Surface/Analytical/Forensic)

### 2.2 Two Pillars (equal importance)
**A_RAI-agronom (Generative Architect)**  
- –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç/—É—Ç–æ—á–Ω—è–µ—Ç TechMap, —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏, –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–µ–π—Å—Ç–≤–∏–π

**A_RAI-controller (Reactive Controller)**  
- real-time –ø–ª–∞–Ω/—Ñ–∞–∫—Ç, –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è, –ø—Ä–æ–≥–Ω–æ–∑—ã, –∞–ª–µ—Ä—Ç—ã, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏  
- –ø—É—à–∏—Ç reactive metrics / cards –≤ Control Plane  
- –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç TechCouncil –ø—Ä–∏ –∫—Ä–∏—Ç–∏–∫–µ

### 2.3 Supporting Agents (v1 scope)
- **A_RAI-crm**: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å—É—â–Ω–æ—Å—Ç–µ–π (Party/Farm/Field/Season) —á–µ—Ä–µ–∑ Draft‚ÜíCommit
- **A_RAI-economist** (phase later): Œî/–º–∞—Ä–∂–∞/ROI, performance fee
- **A_RAI-logistic** (phase later): –°–ó–†/—Ç–µ—Ö–Ω–∏–∫–∞/—Å–∫–ª–∞–¥/–ø–æ—Å—Ç–∞–≤–∫–∏ –ø–æ–¥ TechMap
- **A_RAI-researcher** (phase later): –õ–∞–±–∞/WarRoom/—É–ª—É—á—à–µ–Ω–∏–µ –±—É–¥—É—â–∏—Ö TechMap

---

## 3. Data Model Law: Carcass + Flex (No Anarchy)
### 3.1 Carcass (hard tables, canonical relations)
–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∂—ë—Å—Ç–∫–∏–π –∫–∞—Ä–∫–∞—Å (—Ç–∞–±–ª–∏—Ü—ã/–º–æ–¥–µ–ª–∏):
- Party
- Farm
- Field
- Season
- TechMap
- TechMapTask
- Observation/Event
- Deviation
- Alert
- Decision / Approval (Quorum)

### 3.2 Flex Layer (JSONB attributes)
–õ—é–±—ã–µ –ø–ª–∞–≤–∞—é—â–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã/–ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ö—Ä–∞–Ω–∏–º –≤ JSONB (`attrs`), –Ω–æ **–ø–æ–¥ SchemaKey**.

–ö–∞–∂–¥–æ–µ –ø–æ–ª–µ/–∞—Ç—Ä–∏–±—É—Ç –∏–º–µ–µ—Ç metadata:
- `provenance` (source: dadata | user_text | voice_stt | photo_ai | import | system)
- `confidence` (0..1)
- `updatedBy` (userId/agentId)
- `updatedAt`
- `schemaKey`

**Rule:** Carcass —Ö—Ä–∞–Ω–∏—Ç identity/—Å–≤—è–∑–∏/—Å—Ç–∞—Ç—É—Å—ã, Flex ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ. MUST-–≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ SchemaKey.

---

## 4. Jurisdictions / Currency / Crops (MVP)
### 4.1 Jurisdictions
Start: **RU, BY, KZ**

### 4.2 Currencies
**RUB / BYN / KZT / USD / EUR**

### 4.3 Crops (MVP)
**–†–∞–ø—Å / –ü–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫** (–¥–∞–ª—å—à–µ —Ä–∞—Å—à–∏—Ä—è–µ–º)

---

## 5. Contracts & Validation: 70/30 + Draft‚ÜíCommit (Hard Gate)
### 5.1 Readiness Rule
- MUST fields = ‚Äú70%‚Äù (–æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ-—é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –º–∏–Ω–∏–º—É–º)
- OPTIONAL = ‚Äú30%‚Äù (–º–æ–∂–Ω–æ –ø–æ–∑–∂–µ)

**Commit –∑–∞–ø—Ä–µ—â—ë–Ω**, –ø–æ–∫–∞ `missingMust[]` –Ω–µ –ø—É—Å—Ç.

### 5.2 Draft Lifecycle
–õ—é–±–∞—è —Å—É—â–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑:
- `DRAFT_BLOCKED` (–µ—Å—Ç—å missingMust)
- `READY_TO_COMMIT` (missingMust = [])
- `COMMITTED`

Draft —Ö—Ä–∞–Ω–∏—Ç—Å—è —Å TTL (–Ω–∞–ø—Ä–∏–º–µ—Ä 7 –¥–Ω–µ–π) –∏ –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å—Å—è –¥–∏–∞–ª–æ–≥–æ–º.

---

## 6. Intent Contract (Agent Tooling)
### 6.1 Meta-intents (v1)
- `create_entity` (Draft‚ÜíCommit)
- `update_entity` (DraftUpdate‚ÜíCommitUpdate)
- `link_entities`
- `search`
- `capture_event` (Telegram intake)
- `dashboard` (situational cards/metrics)
- `explain` (why blocked/recommended)
- `approve` (quorum/techcouncil)
- `open_ui` (map/import/report link token)

### 6.2 Tool Calls (typed)
Agent –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç domain –Ω–∞–ø—Ä—è–º—É—é —Å—Ç—Ä–æ–∫–∞–º–∏. –¢–æ–ª—å–∫–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã:
- `draftCreate(entityType, payload)`
- `draftUpdate(entityRef, patch)`
- `validateDraft(draftRef)`
- `commitDraft(draftRef)`
- `search(query, filters)`
- `link(aRef, relation, bRef)`
- `captureEventDraft(input, attachmentsMeta)`
- `commitEvent(eventDraftRef)`
- `computePlanFact(scope)`
- `computeDeviations(scope)`
- `emitAlerts(scope)`
- `requestQuorum(decisionPayload)`
- `renderWidget(widgetPayload)`

---

## 7. Entity Schemas (MVP)
–ù–∏–∂–µ MUST/OPTIONAL –¥–ª—è 3 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π (Party / Field / TechMap).
–û—Å—Ç–∞–ª—å–Ω—ã–µ (Farm/Season/Task/Event) ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–º —Ñ–∞–π–ª–æ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è.

### 7.1 Party (Counterparty) ‚Äî MUST (Hard Block)
**MUST A: Identity**
- `partyType`: LEGAL_ENTITY | SOLE_PROPRIETOR | INDIVIDUAL
- `jurisdiction`: RU | BY | KZ
- `legalName`
- `displayName`
- `registrationIds[]` (–º–∏–Ω–∏–º—É–º 1, –µ—Å—Ç—å `primary=true`)

**Primary ID policy:**
- RU LEGAL_ENTITY: INN + KPP + OGRN (–≤—Å–µ MUST)
- RU SOLE_PROPRIETOR: INN + OGRNIP (MUST)
- BY: UNP (MUST)
- KZ: BIN (—é—Ä) / IIN (—Ñ–∏–∑) (MUST)

**MUST B: Legal address**
- `addresses.legal` (–¥–ª—è LEGAL_ENTITY)

**MUST C: Banking (default strict)**
- `bankAccounts[0].accountNumber` (–∏–ª–∏ IBAN)
- `bankAccounts[0].bankId` (BIC/SWIFT/–±–∞–Ω–∫-–∫–æ–¥)
- `bankAccounts[0].beneficiaryName`

**Rule:** `BankRequired=true` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.  
–ò—Å–∫–ª—é—á–µ–Ω–∏–µ: —Ä–æ–ª—å `PROSPECT` ‚Üí –º–æ–∂–Ω–æ –±–µ–∑ –±–∞–Ω–∫–∞, –Ω–æ **—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø—Ä–µ—â–µ–Ω—ã**.

**MUST D: Primary contact**
- `primaryContact.name`
- `primaryContact.phone OR primaryContact.email`

**MUST E: Roles**
- `roles[]` –º–∏–Ω–∏–º—É–º 1: CUSTOMER | SUPPLIER | PARTNER | PROSPECT | OTHER

**OPTIONAL (examples)**
- addresses.fact/delivery/postal
- extra contacts, extra bank accounts
- related parties / holding links
- docs, notes, tags
- regulatory profile (if not required immediately)

### 7.2 Field ‚Äî MUST
**MUST**
- `farmRef` (–ø—Ä–∏–≤—è–∑–∫–∞ –∫ —Ö–æ–∑—è–π—Å—Ç–≤—É)
- `fieldNameOrCode` (–Ω–∞–ø—Ä–∏–º–µ—Ä 4–ë)
- `areaHa` (—á–∏—Å–ª–æ)
- `locationHint` (—Ä–∞–π–æ–Ω/–Ω–∞—Å.–ø—É–Ω–∫—Ç) –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è –≥–µ–æ–º–µ—Ç—Ä–∏–∏
- `cropsAllowed` includes (rapeseed | sunflower) for MVP
- `status` ACTIVE

**OPTIONAL**
- `geometry` (–ø–æ–ª–∏–≥–æ–Ω)
- soil params, slope, drainage
- history yields
- remote sensing IDs

### 7.3 TechMap ‚Äî MUST (Executable Program)
**MUST**
- `fieldRef`
- `seasonRef`
- `crop`: rapeseed | sunflower
- `version`
- `status`: DRAFT | REVIEW | ACTIVE | CLOSED
- `assumptions[]` (–∫–ª—é—á–µ–≤—ã–µ –¥–æ–ø—É—â–µ–Ω–∏—è: –≤–ª–∞–∂–Ω–æ—Å—Ç—å/–æ–∫–Ω–∞ —Ä–∞–±–æ—Ç/—Ä–µ—Å—É—Ä—Å—ã)
- `targets` (–º–∏–Ω–∏–º—É–º: yieldTarget, costCeiling)
- `tasks[]` (–º–∏–Ω–∏–º—É–º 1)
- `economics` (–º–∏–Ω–∏–º—É–º: expectedMargin model stub)
- `regenNotes` (–º–∏–Ω–∏–º—É–º: –ø—É—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —á—Ç–æ–±—ã –±—ã–ª–æ –∫—É–¥–∞ –¥–æ–±–∞–≤–ª—è—Ç—å)

**OPTIONAL**
- detailed hourly schedule
- advanced regen practices
- supplier mapping, logistics plan
- attachments (docs)

**State machine**
- DRAFT ‚Üí REVIEW (human check)
- REVIEW ‚Üí ACTIVE (approval)
- ACTIVE ‚Üí CLOSED (harvest closeout)

---

## 8. Telegram Intake ‚Üí Event System (MVP)
### 8.1 Universal EventDraft
–õ—é–±–æ–π input (text/voice/photo/video) –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤:
- `eventType` (enum)
- `timestamp` (default now, can be overridden by text)
- `fieldRef?` / `farmRef?` / `taskRef?` (linking cascade)
- `payload` (typed by eventType)
- `evidence[]` (attachments + transcript + hashes)
- `confidence`
- `missingMust[]`

### 8.2 Linking Cascade (no commands)
1) explicit mention in text
2) chat context (last active field/farm/task)
3) geo (if available)
4) agent suggests 2‚Äì3 candidates ‚Üí user taps üîó Link

### 8.3 MVP Event Types (10)
1) `FIELD_OBSERVATION` (weed/disease/pest/phenology/moisture)
2) `TASK_STARTED`
3) `TASK_COMPLETED`
4) `APPLICATION_DONE` (spray/fertilizer)
5) `SOWING_DONE`
6) `HARVEST_PROGRESS`
7) `INPUT_DELIVERY` (seeds/SZR/fertilizer)
8) `WEATHER_ANOMALY`
9) `NDVI_UPDATE`
10) `INCIDENT` (machine breakdown / safety)

### 8.4 MUST rules (examples)
**FIELD_OBSERVATION MUST**
- `fieldRef`
- `observationKind`
- `timestamp`
- `evidence` (text or media)

**TASK_COMPLETED MUST**
- `taskRef` (–∏–ª–∏ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–µ match)
- `timestamp`

**INPUT_DELIVERY MUST**
- `counterpartyRef OR counterpartyDraft`
- `items[]` (name + qty)
- `timestamp`

### 8.5 Telegram Response Format (hard)
Agent –æ—Ç–≤–µ—á–∞–µ—Ç:
1) 1‚Äì2 —Å—Ç—Ä–æ–∫–∏ Summary (‚Äú–û—Ñ–æ—Ä–º–∏–ª –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ‚Ä¶‚Äù)  
2) 1 MUST-–≤–æ–ø—Ä–æ—Å (–º–∞–∫—Å 2)  
3) –∫–Ω–æ–ø–∫–∏: ‚úÖ / ‚úèÔ∏è / üîó

---

## 9. Controller Engine (Plan/Fact ‚Üí Deviations ‚Üí Alerts)
### 9.1 Inputs
- committed TechMap + tasks
- committed Events (from Telegram + sensors + imports)
- optional: weather/NDVI feeds

### 9.2 Outputs
- `planFactMetrics` per task/field/farm/season
- `deviations` with severity levels
- `alerts` with recommended actions
- `widgetPayload` for Control Plane (cards/metrics)

### 9.3 Severity & Escalation
- deviation severity: S0..S4
- mapping to RiskGate R0..R4
- S3/S4 ‚Üí auto `requestTechCouncil` (quorum)

---

## 10. Situational Widgets Contract (Control Plane)
Agent emits structured UI payloads:
- `updateCards[]` (compact cards)
- `newAlerts[]`
- `reactiveMetrics` (timeseries + aggregates)
- `openUiToken` (map/import/report)

Widget types (MVP):
- DeviationList
- FieldStatusCard
- TaskBacklog
- ForecastSummary
- RiskOverview
- Last24hChanges

---

## 11. Phased Delivery Plan (engineering)
### Phase 1 ‚Äî Contracts + Draft/Commit (week 1)
- Zod/JSON schemas for Party/Field/TechMap + EventDraft
- Jurisdiction policies RU/BY/KZ
- Draft store + TTL + audit metadata

### Phase 2 ‚Äî Telegram Intake MVP (week 1‚Äì2)
- captureEventDraft for text/voice/photo/video
- confirm/fix/link buttons
- linking cascade
- commitEvent + audit/evidence

### Phase 3 ‚Äî CRM Agent MVP (week 2)
- create Party/Farm/Field via Draft‚ÜíCommit
- DaData enrichment for Party (RU/BY/KZ where supported)
- BankRequired strict + PROSPECT exception gate

### Phase 4 ‚Äî TechMap MVP (week 2‚Äì3)
- generate TechMap draft (rapeseed/sunflower)
- approval flow DRAFT‚ÜíREVIEW‚ÜíACTIVE
- task fan-out to Telegram

### Phase 5 ‚Äî Controller MVP (week 3‚Äì4)
- plan/fact metrics
- deviation detection
- alerts + escalation to tech council

### Phase 6 ‚Äî Minimal Web Control Plane (parallel)
- Chat + Reactive Panel
- Approvals Inbox
- Map page token (later)

---

## 12. Test Scenarios (chat-driven acceptance)
### 12.1 Party registration RU (strict)
Input: ‚Äú–ó–∞—Ä–µ–≥–∞–π –û–û–û –†–æ–º–∞—à–∫–∞, –ò–ù–ù 7701234567‚Äù
Expected:
- Draft created from DaData
- missingMust includes KPP/OGRN if absent, legal address if absent, bank, contact, role
- commit blocked until all MUST provided
- commit writes Party + provenance

### 12.2 Telegram observation (photo)
Input: photo + ‚Äú–Ω–∞ 4–ë –∂—É–∫, –∂—Ä—ë—Ç –ª–∏—Å—Ç‚Äù
Expected:
- EventDraft FIELD_OBSERVATION
- field linking via context or üîó candidates
- must question only if fieldRef missing
- commit produces event + evidence

### 12.3 Controller deviation
Given: TechMap task planned nitrogen dose X
Event: APPLICATION_DONE dose X*1.07
Expected:
- deviation + severity computed
- alert emitted with recommendation
- if severity high ‚Üí tech council requested

---

## 13. Non-Negotiables
- No commit without MUST completion (hard gate)
- Telegram remains free chat; commands are optional; buttons minimal (‚úÖ‚úèÔ∏èüîó)
- Agent actions are typed tool calls only (no ‚Äústring-execution‚Äù)
- Audit/provenance/confidence recorded for every committed field
- TechMap is the center; everything else serves it

---
End of Spec (v1)