---
id: DOC-STR-UI-001
type: Standard
layer: Strategy
status: Active
version: 1.0.2
owners: [@techlead]
last_updated: 2026-02-20
---

# Мастер-стандарт Дизайн-системы (Institutional Grade 10/10+)
## RAI-DS-MASTER-v1.0.2

> [!IMPORTANT]
> Это не просто UI-кит. Это стандарт **Institutional Governance Control Plane**. Любое отклонение от данного канона приравнивается к архитектурной ошибке и подрывает доверие к системе при аудите.

---

## 1. Позиционирование Системы

Интерфейс RAI Enterprise — это не очередной SaaS-продукт. Это:

*   **Governance-first Control Plane**: Поверхность управления институциональным уровнем.
*   **Ledger-aware environment**: Среда, чувствительная к состоянию реестра (Ledger).
*   **Risk-visible surface**: Каждый пиксель служит визуализации рисков.
*   **Signature-conscious layer**: Слой исполнения, завязанный на криптографические подписи.
*   **Escalation-driven**: Система, где эскалация — это штатный механизм управления.

**Аксиома:** Каждый экран — это потенциально юридически значимое действие.

---

## 2. Визуальная Философия

### 2.1 Control Plane vs SaaS UI

Интерфейс управления (Control Plane) требует иного подхода, чем обычное облачное ПО:

| Характеристика | SaaS Парадигма | Institutional Парадигма (RAI) |
| :--- | :--- | :--- |
| **Приоритет** | KPI-first (достижения) | **Risk-first** (безопасность) |
| **Стиль** | Мягкий, декоративный | **Жёсткий, структурный** |
| **Мотивация** | Вовлеченность (Engagement) | **Ответственность** (Accountability) |
| **Сложность** | Скрыта (Simplicity) | **Экспонирована** (Traceability) |
| **Предвзятость** | Оптимизм (всё ок) | **Явная неопределенность** |

---

## 3. Архитектура Layout

### 3.1 Контуры интерфейса

1.  **Контур 1 — Enterprise Desktop (Основной)**:
    *   `Institutional Governance Bar`: Слой глобального управления (верхняя панель).
    *   `Domain Tree`: Навигация по доменам суверенитета (левая панель).
    *   `Work Surface`: Операционная поверхность (центр).

### 3.2 Role-Scoped Governance Bar

Верхняя панель управления адаптируется под уровень полномочий пользователя, обеспечивая релевантный масштаб контроля:

| Роль | Масштаб обзора (Scope) | Ключевые метрики в баре |
| :--- | :--- | :--- |
| **CEO / CFO** | Cross-Domain | Интегральный риск холдинга, Cash Flow, Активные M-of-N |
| **Director** | Domain-Specific | Риски домена, Очередь эскалаций домена, Реестр решений |
| **Manager** | Operational | Локальные алерты (поле/склад), Статус текущих задач |

---

## 4. Ролевая и Доменная Проекция

### 4.1 AuthorityContext (Technical Standard)

Для защиты от архитектурной деградации, все **Decision-компоненты** обязанны потреблять единый технический контракт полномочий. Запрещено использовать прямые проверки `user.role` внутри UI.

```typescript
interface AuthorityContext {
  canOverride: boolean;  // Право форсированного перехода FSM (Level C)
  canSign: boolean;      // Право участия в кворуме (Level F)
  canEscalate: boolean;  // Право ручного триггера эскалации
  canEdit: boolean;      // Право модификации данных в текущем состоянии
  canApprove: boolean;   // Право окончательного подтверждения (Finality)
}
```

**UX Правило**: Компонент запрашивает флаги у `GovernanceService`. Рендеринг (скрытие, блокировка, эскалация) зависит только от этих флагов.

---

## 5. Модель Эскалации (Escalatory Governance)

### 5.1 Decision Flow & Two-Phase Execution

Процесс изменения состояния всегда двухфазный (**Deferred Commit**):

1.  **INITIATED**: Намерение записано.
2.  **PENDING**: Ожидание комитета (Визуальный Timeline эскалации).
3.  **APPROVED**: Решение получено, ожидание фиксации.
4.  **EXECUTED**: Финальная запись в Ledger (Immutable).

### 5.2 Canonical Escalation Banner UX

При переходе задачи в статус эскалации (R3/R4), интерфейс обязан отображать канонический баннер-паттерн:

*   **Status Alert**: Яркий семантический индикатор (красный/пурпурный).
*   **Escalation ID**: Кликабельная ссылка на тикет эскалации.
*   **Target Committee**: Куда ушел запрос (напр. *Risk Committee*).
*   **Quorum Progress**: Визуализация подписей (напр. *1/3 Signed*).
*   **Trace ID**: Ссылка на исходное событие в Ledger.

---

## 6. Стратификация рисков (Risk Triage Layer)

| Уровень | Категория | UX Поведение |
| :--- | :---: | :--- |
| **R4** | Critical | Мгновенный Hard-Escalation, блокировка связанных действий |
| **R3** | High | Красный баннер, требование немедленного Quorum |
| **R2** | Moderate | Желтый индикатор, запись в CRM Deviation |
| **R1** | Info | Синий маркер в логах, без прерывания потока |

---

## 7. Кросс-доменные причинно-следственные связи (Causal Loops)

Интерфейс обязан транслировать **Triggered Effects**: цепочку последствий в смежных доменах. 
*Пример: Изменение агро-плана (Agronomy) -> Автоматический пересчет бюджета (Finance) -> Обновление карты рисков (Strategy).*

---

## 8. Архитектура когнитивной глубины (Cognitive Depth)

Принцип **Progressive Disclosure**:
1.  **Surface**: Рекомендация, статус.
2.  **Analytical**: Обоснование ("Почему?"), влияние факторов.
3.  **Forensic**: Merkle Tree, сырые логи Ledger, версии моделей.

---

## 9. Институциональное состояние покоя (Relief State)

При отсутствии конфликтов, зависших эскалаций и полной синхронизации Ledger, система входит в **Stable State**. 
**UX**: Режим "Structural Calm" — отсутствие визуального шума и лишних уведомлений, подчеркивающее стабильность системы.

---

## 10. Чек-лист Институционального Качества (D10+)

- [ ] Decision-компоненты используют `AuthorityContext`?
- [ ] Баннер эскалации содержит ID, Committee и Quorum?
- [ ] Видимость Governance Bar соответствует роли (CEO/Manager)?
- [ ] Все 4 фазы исполнения отражены?
- [ ] Кросс-доменные эффекты видны?
- [ ] ИИ-рекомендации имеют 3 уровня глубины?

---
*Lead Architecture: Antigravity AI Engine*  
*Version: v1.0.2 | Status: Institutional Ready (POLISHED)*