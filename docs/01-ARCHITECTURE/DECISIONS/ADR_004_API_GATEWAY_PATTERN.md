# ADR 004: API Gateway Pattern — Unified NestJS Entry Point

## Статус
**Принято** | **Версия:** 1.0 | **Дата:** 2026.02.02

## Контекст
Необходимо определить, как внешние клиенты (Web, Bot) будут взаимодействовать с нашими сервисами. 
Варианты:
1. **Direct Access**: Клиенты стучатся напрямую в каждый микросервис.
2. **Dedicated API Gateway**: Отдельный сервис (Nginx, Kong или NestJS) для маршрутизации.
3. **Unified NestJS Entry Point**: Текущий `apps/api` выступает и шлюзом, и сервисным контейнером.

## Решение
**Unified NestJS Entry Point (Модульный монолит в роли шлюза)**

Для Phase Alpha мы используем `apps/api` как единую точку входа:
- **Routing**: NestJS GraphQL/REST контроллеры.
- **Auth**: Единый Guard для всех модулей.
- **Aggregation**: Мы объединяем данные из разных модулей (Core, RAI) в одном ответе GraphQL.

## Обоснование
1. **Снижение операционной сложности**: Один деплой, одна точка конфигурации SSL и CORS.
2. **GraphQL**: Идеально подходит для агрегации данных из разных доменов без создания "Gateway-ада".
3. **Phase Alpha Readiness**: Это самый быстрый путь к работающему продукту.

## Последствия
- Легче управлять безопасностью.
- При росте нагрузки мы сможем вынести тяжелые модули за отдельный Gateway.
