# HLD: AI Orchestration Hub (–ò–ò-–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä) ü§ñ

> **–°—Ç–∞—Ç—É—Å:** –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | **–§–∞–∑–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** Beta/Gamma | **–°–ª–æ–π:** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ / HLD

---

## 1. –§–∏–ª–æ—Å–æ—Ñ–∏—è: "Stateless Intelligence for Enterprise"
–í RAI Enterprise Platform –ò–ò ‚Äî —ç—Ç–æ "–º–æ–∑–≥", —Ä–∞–±–æ—Ç–∞—é—â–∏–π –≤ **–î–≤—É—Ö –ö–æ–Ω—Ç—É—Ä–∞—Ö** (–û—Ñ–∏—Å –∏ –ü–æ–ª–µ).
–ú—ã –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–µ–º—Å—è –∫–∞–Ω–æ–Ω–∞ **Stateless AI**:
- –°–∞–º LLM-–∞–¥–∞–ø—Ç–µ—Ä **–Ω–µ —Ö—Ä–∞–Ω–∏—Ç** –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞.
- –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ **Unified Memory** (CRM, HR, Agro).
- **AI explains. Human decides.**

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: "Router-Solver" (Enterprise Edition)

–ú—ã —Ä–µ–∞–ª–∏–∑—É–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω **Multi-Agent Orchestrator**, –≥–¥–µ Router —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–¥–∞—á–∏ –º–µ–∂–¥—É "–ü–æ–ª–µ–≤—ã–º–∏" –∏ "–û—Ñ–∏—Å–Ω—ã–º–∏" –∞–≥–µ–Ω—Ç–∞–º–∏.

```mermaid
graph TD
    %% –í–•–û–î
    User((üë§ User)) -->|Msg/Voice/Docs| TG[üì± TG Bot / Web ERP]
    TG -->|Raw Request| Router[üö¶ Global Intent Router]
    
    %% –ú–ê–†–®–†–£–¢–ò–ó–ê–¶–ò–Ø
    Router -->|Switch: Context| DomainLogic{–û—Ü–µ–Ω–∫–∞ –î–æ–º–µ–Ω–∞}
    
    %% CONTOUR 2: FIELD (–ü–æ–ª–µ)
    DomainLogic -->|Agro/Field| AgroPlanner[üìù Field Planner]
    AgroPlanner -->|Vision Task| VisionAgent[üëÅÔ∏è Vision AI]
    AgroPlanner -->|Tech Task| AgroExpert[üåæ Agro Expert]
    
    %% CONTOUR 1: ENTERPRISE (–û—Ñ–∏—Å)
    DomainLogic -->|Business| CorpPlanner[üè¢ Corporate Planner]
    CorpPlanner -->|HR/Team| HrAgent[üë©‚Äçüíº HR Agent]
    CorpPlanner -->|Legal/Docs| LegalAgent[‚öñÔ∏è Legal AI]
    CorpPlanner -->|Finance/ROI| FinAgent[üí∞ Finance AI]
    
    %% SOURCING
    AgroExpert & FinAgent & LegalAgent -->|Fetch Data| Core[(üõ°Ô∏è Business Core)]
    AgroExpert & FinAgent -->|Fetch Memory| Engrams[(üß† Unified Memory)]
    
    %% –°–ë–û–†–ö–ê –û–¢–í–ï–¢–ê
    AgroExpert & FinAgent & LegalAgent -->|Result| Formatter[üé® Response Formatter]
    Formatter -->|Text/File/Voice| Output[üì§ Output Channel]
```

---

## 3. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ê–≥–µ–Ω—Ç–æ–≤ (Solvers)

### 3.1 –ü–æ–ª–µ–≤–æ–π –ö–æ–Ω—Ç—É—Ä (Field Solvers)
1.  **Agro Expert:** –ó–Ω–∞–µ—Ç 16 —ç—Ç–∞–ø–æ–≤ —Ä–∞–ø—Å–∞. –£–º–µ–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–µ—Ñ–∏—Ü–∏—Ç –ø–∏—Ç–∞–Ω–∏—è.
2.  **Vision Agent:** –†–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –≤—Ä–µ–¥–∏—Ç–µ–ª–µ–π –ø–æ —Ñ–æ—Ç–æ (Computer Vision).
3.  **Machinery Agent:** –ó–Ω–∞–µ—Ç –æ—Å—Ç–∞—Ç–∫–∏ –ì–°–ú –∏ —Å—Ç–∞—Ç—É—Å —Ç–µ—Ö–Ω–∏–∫–∏.

### 3.2 –û—Ñ–∏—Å–Ω—ã–π –ö–æ–Ω—Ç—É—Ä (Enterprise Solvers)
1.  **HR Agent:**
    *   *Skill:* –ê–Ω–∞–ª–∏–∑ –ø—É–ª—å—Å-–æ–ø—Ä–æ—Å–æ–≤ (–≤—ã–≥–æ—Ä–∞–Ω–∏–µ).
    *   *Task:* "–ù–∞–π–¥–∏ –∞–≥—Ä–æ–Ω–æ–º–∞ –≤ –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä–µ".
2.  **Legal Agent:**
    *   *Skill:* –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–≥–æ–≤–æ—Ä–æ–≤ (GigaLegal Integration).
    *   *Task:* "–†–∏—Å–∫–∏ –≤ –¥–æ–≥–æ–≤–æ—Ä–µ –ø–æ—Å—Ç–∞–≤–∫–∏ ‚Ññ5".
3.  **Finance Agent:**
    *   *Skill:* –†–∞—Å—á–µ—Ç ROI –∏ What-if —Å–∏–º—É–ª—è—Ü–∏–∏.
    *   *Task:* "–ß—Ç–æ –µ—Å–ª–∏ —Ü–µ–Ω–∞ –Ω–∞ —Å–µ–ª–∏—Ç—Ä—É –≤—ã—Ä–∞—Å—Ç–µ—Ç –Ω–∞ 20%?".
4.  **Sales Agent:**
    *   *Skill:* –°–∫–æ—Ä–∏–Ω–≥ –∫–ª–∏–µ–Ω—Ç–æ–≤ (LTV).

---

## 4. –≠—Ç–∞–ø—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ (Router Flow)

### 4.1. Router (–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä)
*   **–ú–æ–¥–µ–ª—å:** `gpt-4o-mini` / `local-llama-3`.
*   **Classes:** `AGRO_QUERY`, `HR_REQUEST`, `LEGAL_CHECK`, `FINANCE_REPORT`.
*   **–ü—Ä–∏–º–µ—Ä:**
    *   "–ü–æ—á–µ–º—É –∂–µ–ª—Ç–µ–µ—Ç –ª–∏—Å—Ç?" -> `AGRO_QUERY`
    *   "–ö–∞–∫–æ–π –±–æ–Ω—É—Å —è –ø–æ–ª—É—á—É?" -> `HR_REQUEST`

### 4.2. Solvers (–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏)
–ò—Å–ø–æ–ª—å–∑—É—é—Ç **Tool Calling** –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API (Back-Office –∏–ª–∏ Field Services).
*   *HR Agent* –≤—ã–∑—ã–≤–∞–µ—Ç `GET /hr/salary/my`.
*   *Agro Agent* –≤—ã–∑—ã–≤–∞–µ—Ç `GET /fields/5/soil`.

---

## 5. –†–∏—Å–∫–∏ –∏ –†–µ—à–µ–Ω–∏—è

### ‚ö†Ô∏è –†–∏—Å–∫: "–°–ª–æ–º–∞–Ω–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω"
–ï—Å–ª–∏ Router –æ—Ç–ø—Ä–∞–≤–∏—Ç —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å –∞–≥—Ä–æ–Ω–æ–º—É, –±—É–¥–µ—Ç –±—Ä–µ–¥.
*   **–†–µ—à–µ–Ω–∏–µ:** Solvers –∏–º–µ—é—Ç –ø—Ä–∞–≤–æ –≤–µ—Ä–Ω—É—Ç—å —Ñ–ª–∞–≥ `WRONG_CONTEXT` –æ–±—Ä–∞—Ç–Ω–æ –≤ Router.

### ‚ö†Ô∏è –†–∏—Å–∫: –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å
HR-–¥–∞–Ω–Ω—ã–µ (–∑–∞—Ä–ø–ª–∞—Ç—ã) –Ω–µ –¥–æ–ª–∂–Ω—ã –ø–æ–ø–∞—Å—Ç—å –≤ –æ—Ç–≤–µ—Ç, –µ—Å–ª–∏ —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–∞—Ç–æ—Ä.
*   **–†–µ—à–µ–Ω–∏–µ:** Router –ø–µ—Ä–µ–¥–∞–µ—Ç **User Role** –≤ Solver. Solver —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç.

---

## 6. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
*   **Orchestration:** LangChain / AutoGen.
*   **Core Models:** GPT-4o (Reasoning), Claude 3 (Code/Legal).
*   **Local Models:** Fine-tuned Lliama 3 (–¥–ª—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö).
