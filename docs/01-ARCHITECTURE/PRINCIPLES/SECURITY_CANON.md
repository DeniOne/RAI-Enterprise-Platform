---
id: principle-security-canon
type: principle
status: approved
owners: [architects, security-officers, techleads]
aligned_with: [principle-canon, principle-axioms, principle-ai-governance-canon]
tags: [security, governance, mandatory]
---

# SECURITY CANON

## 0. Статус документа

Данный документ фиксирует обязательные security-принципы проекта.

- Обязателен для USER, TECHLEAD, CODER и AI-инструментов
- Нарушение любого правила = PROCESS HALT
- При конфликте трактовки приоритет имеет `CANON.md`

---

## 1. Базовые принципы

1. Security-by-default: безопасное поведение должно быть стандартом, а не опцией.
2. Least privilege: доступ только в объеме минимально необходимого.
3. Explicit trust boundary: границы доверия фиксируются явно.
4. Auditability: каждое критичное действие должно быть трассируемо.
5. Fail-safe: при неопределенности система деградирует в безопасный режим.

---

## 2. Identity и Access

1. Любая критичная операция выполняется только в валидном security context.
2. Ролевой доступ обязателен для write-операций в доменных модулях.
3. Human-in-the-loop обязателен для high-impact решений.
4. Нельзя обходить Admission/Integrity gate для изменения состояния системы.

---

## 3. Multi-tenancy и изоляция данных

1. Все tenant-scoped данные изолируются через `companyId`.
2. `companyId` извлекается только из доверенного контекста (JWT/session), не из произвольного пользовательского payload.
3. Любая выборка/запись tenant-данных должна быть фильтрована по `companyId`.
4. Кросс-тенант доступ без явного админ-сценария запрещен.

---

## 4. API и транспорт

1. Внешние endpoint должны иметь аутентификацию и авторизацию согласно роли.
2. Внутренние endpoint должны использовать выделенный механизм доверия (например, internal key / service identity).
3. Входные payload проходят валидацию до бизнес-логики.
4. Секреты не логируются и не хардкодятся в коде/документах.

---

## 5. Логирование и аудит

1. Критичные security-события обязаны попадать в аудит:
   - попытки доступа,
   - изменения статусов,
   - системные security-исключения.
2. Лог должен содержать минимальный набор трассировки: `traceId`, actor/user, action, timestamp.
3. Аудит-лог read-only для продуктового потока; корректировки только через регламентированный процесс.

---

## 6. AI Security Governance

1. AI не имеет права исполнять необратимые действия без явного человеческого подтверждения.
2. AI-рекомендации в shadow-режиме не должны влиять на пользовательский flow.
3. Все advisory-решения должны иметь explainability-поля и confidence.
4. Для рискованных изменений требуется security review до merge.

---

## 7. Обязательный security-check TECHLEAD

Перед началом реализации TECHLEAD обязан проверить:

1. Есть ли `Decision-ID` и статус `ACCEPTED`.
2. Нет ли нарушения tenant-изоляции (`companyId`).
3. Нет ли обхода gate-процессов.
4. Есть ли audit trail для нового high-impact потока.
5. Не добавляются ли контроллеры/интеграции вне утвержденного scope.

Если хотя бы один пункт не выполняется:

- процесс останавливается,
- запрашивается уточнение/одобрение USER,
- реализация не продолжается.

---

## 8. Запрещено

Категорически запрещено:

- хранить секреты в коде и markdown-документах;
- принимать `companyId` как источник истины из недоверенного запроса;
- отключать аудит критичных операций;
- публиковать AI-рекомендации в production без human confirmation;
- обходить role-check и policy-check ради "ускорения".

---

## 9. Ключевой принцип

> Безопасность обязательна по умолчанию.  
> Отсутствие инцидента не является доказательством защищенности.

