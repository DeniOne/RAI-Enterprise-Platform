0. –í–ê–ñ–ù–û

–í—Å–µ –Ω–æ–≤—ã–µ —Å–ª–æ–≤–∞ –∏ —Ñ—Ä–∞–∑—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

–°—É—â–µ—Å—Ç–≤—É—é—â–∏–π Wizard –ù–ï –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å.

–®–∞–≥ ‚Äú–Æ—Ä–∏—Å–¥–∏–∫—Ü–∏—è‚Äù (dropdown) –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å.

–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —à–∞–≥ ‚Äú–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è‚Äù –ø–æ—Å–ª–µ ‚Äú–Æ—Ä–∏—Å–¥–∏–∫—Ü–∏—è‚Äù.

–ù–µ —É–¥–∞–ª—è—Ç—å —Ç–µ–∫—É—â–∏–µ —à–∞–≥–∏.

–ù–µ –º–µ–Ω—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ª–æ–≥–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è Party.

1Ô∏è‚É£ –î–æ–±–∞–≤–∏—Ç—å —à–∞–≥ Wizard: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ

–¢–∏–ø ‚Üí –Æ—Ä–∏—Å–¥–∏–∫—Ü–∏—è ‚Üí –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (NEW) ‚Üí –ü—Ä–æ—Ñ–∏–ª—å ‚Üí –†–µ–∫–≤–∏–∑–∏—Ç—ã ‚Üí –°–≤—è–∑–∏

1.1 UI –ª–æ–≥–∏–∫–∞ —à–∞–≥–∞

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:
PartyIdentificationStep.tsx

–ü–æ–ª—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç jurisdictionId:

RU

LEGAL_ENTITY:

inn (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ, 10 —Ü–∏—Ñ—Ä)

kpp (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, 9 —Ü–∏—Ñ—Ä)

IP / KFH:

inn (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ, 12 —Ü–∏—Ñ—Ä)

BY

unp (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)

KZ

bin (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ, 12 —Ü–∏—Ñ—Ä)

1.2 –ü–æ–≤–µ–¥–µ–Ω–∏–µ

debounce 800ms

–∫–Ω–æ–ø–∫–∞ ‚Äú–ù–∞–π—Ç–∏ –ø–æ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º‚Äù

–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–∫–∏ ‚Äú–î–∞–ª–µ–µ‚Äù –≤–æ –≤—Ä–µ–º—è –ø–æ–∏—Å–∫–∞

loader

preview –∫–∞—Ä—Ç–æ—á–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–∫–Ω–æ–ø–∫–∞ ‚Äú–ü—Ä–∏–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ‚Äù

–∫–Ω–æ–ø–∫–∞ ‚Äú–ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é‚Äù

2Ô∏è‚É£ Backend Endpoint

–°–æ–∑–¥–∞—Ç—å endpoint:

POST /api/party-lookup

Request:

{
  "jurisdictionId": "RU|BY|KZ",
  "partyType": "LEGAL_ENTITY|IP|KFH",
  "query": {
    "inn": "...",
    "kpp": "...",
    "unp": "...",
    "bin": "..."
  }
}

Response:

{
  "status": "FOUND|NOT_FOUND|ERROR",
  "source": "DADATA",
  "fetchedAt": "ISO",
  "result": {
    "legalName": "...",
    "shortName": "...",
    "requisites": {
      "inn": "...",
      "kpp": "...",
      "ogrn": "...",
      "ogrnip": "...",
      "unp": "...",
      "bin": "..."
    },
    "addresses": [
      { "type": "LEGAL", "full": "..." }
    ],
    "meta": {
      "status": "ACTIVE",
      "managerName": "...",
      "okved": "...",
      "registeredAt": "ISO_DATE"
    }
  }
}
3Ô∏è‚É£ Provider abstraction (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

–°–æ–∑–¥–∞—Ç—å:

interface CounterpartyLookupProvider {
  supports(jurisdictionId: string): boolean;
  lookup(req: PartyLookupRequest): Promise<PartyLookupResponse>;
}

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:

DaDataProvider (RU)

Stub –¥–ª—è BY/KZ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç NOT_SUPPORTED)

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

LOOKUP_PROVIDER_PRIMARY=DADATA
4Ô∏è‚É£ –í–∞–ª–∏–¥–∞—Ü–∏—è –ò–ù–ù RU (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

–î–æ–±–∞–≤–∏—Ç—å checksum validation.

–ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å lookup, –µ—Å–ª–∏ –ò–ù–ù –Ω–µ–≤–∞–ª–∏–¥–µ–Ω.

5Ô∏è‚É£ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

Redis:

party_lookup:{jurisdiction}:{identifier}
TTL 86400
6Ô∏è‚É£ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é:

applyLookupResult(result)

–û–±–Ω–æ–≤–ª—è–µ—Ç wizardState:

legalName

requisites

addresses

dataProvenance {
lookupSource,
fetchedAt,
requestKey
}

–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –≤–≤–æ–¥–∏–ª –∑–Ω–∞—á–µ–Ω–∏—è ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å diff-dialog.

7Ô∏è‚É£ Audit –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏ –∫–∞–∂–¥–æ–º lookup –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å:

userId

tenantId

identifier

provider

status

timestamp

8Ô∏è‚É£ UI –±–µ–π–¥–∂

–í —à–∞–≥–µ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–∫–∞–∑–∞—Ç—å:

–ó–∞–ø–æ–ª–Ω–µ–Ω–æ –∏–∑ DADATA 12.03.2026
9Ô∏è‚É£ Acceptance Criteria

RU ‚Üí –≤–≤–æ–¥ –ò–ù–ù ‚Üí –∞–≤—Ç–æ–ø–æ–∏—Å–∫ ‚Üí preview ‚Üí –ø—Ä–∏–º–µ–Ω–∏—Ç—å ‚Üí –∑–∞–ø–æ–ª–Ω–µ–Ω—ã:

legalName

INN

KPP

OGRN

–∞–¥—Ä–µ—Å

–î–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è.

–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤–≤–æ–¥ —Ç–æ–≥–æ –∂–µ –ò–ù–ù –±–µ—Ä—ë—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–µ—à–∞.

–Æ—Ä–∏—Å–¥–∏–∫—Ü–∏—è dropdown –æ—Å—Ç–∞–ª—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

BY/KZ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ, –Ω–æ lookup –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å NOT_SUPPORTED.

üîü –ù–µ –¥–µ–ª–∞—Ç—å

–ù–µ —Å–∫—Ä–µ–π–ø–∏—Ç—å HTML egrul.nalog.ru

–ù–µ —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç—å —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –≤ UI

–ù–µ –ø–µ—Ä–µ—Ç–∏—Ä–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

–ò—Ç–æ–≥ –∑–∞–¥–∞—á–∏

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

Wizard –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –±—ã—Ç—å ‚Äú—Ñ–æ—Ä–º–æ–π —Ä–∞–¥–∏ —Ñ–æ—Ä–º—ã‚Äù.

–†–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞–∫ –≤ 1–°.

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –∫ BY/KZ.

–ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤.

–ù–µ—Ç —Ö–∞–æ—Å–∞ –≤ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞—Ö.

---

## ‚úÖ –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (—á–µ–∫–ª–∏—Å—Ç)

- [x] –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π Wizard –Ω–µ –ø–µ—Ä–µ–ø–∏—Å–∞–Ω.
- [x] –®–∞–≥ `–Æ—Ä–∏—Å–¥–∏–∫—Ü–∏—è` –æ—Å—Ç–∞–≤–ª–µ–Ω –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (dropdown —Å–æ—Ö—Ä–∞–Ω—ë–Ω).
- [x] –î–æ–±–∞–≤–ª–µ–Ω —à–∞–≥ `–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è` –ø–æ—Å–ª–µ `–Æ—Ä–∏—Å–¥–∏–∫—Ü–∏—è`.
- [x] –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —à–∞–≥–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞: `–¢–∏–ø ‚Üí –Æ—Ä–∏—Å–¥–∏–∫—Ü–∏—è ‚Üí –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Üí –ü—Ä–æ—Ñ–∏–ª—å ‚Üí –†–µ–∫–≤–∏–∑–∏—Ç—ã ‚Üí –°–≤—è–∑–∏`.
- [x] –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `PartyIdentificationStep.tsx` —Å –ø–æ–ª—è–º–∏ –ø–æ `jurisdictionId`:
  - [x] RU + LEGAL_ENTITY: `inn (10, required)`, `kpp (9, optional)`.
  - [x] RU + IP/KFH: `inn (12, required)`.
  - [x] BY: `unp (required)`.
  - [x] KZ: `bin (12, required)`.
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —à–∞–≥–∞:
  - [x] debounce `800ms`,
  - [x] –∫–Ω–æ–ø–∫–∞ `–ù–∞–π—Ç–∏ –ø–æ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º`,
  - [x] –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ `–î–∞–ª–µ–µ` –≤–æ –≤—Ä–µ–º—è –ø–æ–∏—Å–∫–∞,
  - [x] loader,
  - [x] preview –∫–∞—Ä—Ç–æ—á–∫–∞,
  - [x] –∫–Ω–æ–ø–∫–∏ `–ü—Ä–∏–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ` –∏ `–ó–∞–ø–æ–ª–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é`.
- [x] –°–æ–∑–¥–∞–Ω backend endpoint `POST /api/party-lookup`.
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω provider abstraction `CounterpartyLookupProvider`.
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:
  - [x] `DaDataProvider` (RU),
  - [x] BY/KZ stub (`NOT_SUPPORTED`).
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `LOOKUP_PROVIDER_PRIMARY=DADATA` (–≤ `.env.example`).
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ checksum-–≤–∞–ª–∏–¥–∞—Ü–∏—è –ò–ù–ù RU –∏ –±–ª–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ lookup –ø—Ä–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–º –ò–ù–ù.
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ Redis:
  - [x] –∫–ª—é—á `party_lookup:{jurisdiction}:{identifier}`,
  - [x] TTL `86400`.
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (`applyLookupResult`) —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º:
  - [x] `legalName`,
  - [x] `requisites`,
  - [x] `addresses`,
  - [x] `dataProvenance`.
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `diff-dialog` –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ audit-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ lookup:
  - [x] `userId`,
  - [x] `tenantId`,
  - [x] `identifier`,
  - [x] `provider`,
  - [x] `status`,
  - [x] `timestamp`.
- [x] –í —à–∞–≥–µ `–ü—Ä–æ—Ñ–∏–ª—å` –¥–æ–±–∞–≤–ª–µ–Ω –±–µ–π–¥–∂: `–ó–∞–ø–æ–ª–Ω–µ–Ω–æ –∏–∑ DADATA <–¥–∞—Ç–∞>`.
- [x] Lookup-–¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `registrationData` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `Party`.
- [x] –î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ (–≤–∫–ª–∞–¥–∫–∏ `–ü—Ä–æ—Ñ–∏–ª—å` –∏ `–†–µ–∫–≤–∏–∑–∏—Ç—ã`).
