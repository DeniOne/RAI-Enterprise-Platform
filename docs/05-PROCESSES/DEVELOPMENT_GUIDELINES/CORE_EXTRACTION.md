# BUSINESS_CORE_EXTRACTION_GUIDE

## Статус документа
КАНОНИЧЕСКИЙ  
Обязателен для всех участников этапа экстракции Business Core.

Документ определяет:
- цель экстракции,
- допустимые и запрещённые действия,
- метод классификации кода,
- критерии завершённости этапа.

Нарушение положений документа = нарушение архитектурного канона.

---

## 1. Назначение экстракции

Экстракция Business Core — это процесс **выделения универсального операционного ядра**
из существующей исторической реализации (MatrixGin).

MatrixGin:
- НЕ является фундаментом;
- используется ТОЛЬКО как источник существующей логики;
- не переносится как продукт или концепция.

---

## 2. Цель этапа

Результатом экстракции должно стать **нейтральное, доменно-независимое Business Core**, которое:

- не содержит брендовых, продуктовых или отраслевых смыслов;
- не привязано к конкретному бизнес-домену;
- может быть подключено:
  - к RAI (агробизнес),
  - к любому другому домену,
  без изменения кода ядра.

Экстракция НЕ является:
- рефакторингом,
- оптимизацией,
- переписыванием,
- развитием функционала.

---

## 3. Определение Business Core

Business Core — это универсальное ядро управления бизнес-реальностью.

Ядро отвечает на вопрос:
> «Как управлять бизнес-реальностью»

Ядро НЕ отвечает на вопрос:
> «Чем именно мы управляем»

---

## 4. Допустимое содержимое Business Core

В Business Core могут находиться ТОЛЬКО универсальные контуры:

- идентификация и доступ;
- организационная структура;
- роли, ответственности, полномочия;
- задачи и обязательства;
- процессы и состояния (FSM);
- события и реактивные механизмы;
- базовый экономический контур;
- аналитика в обобщённом виде.

Любая доменная интерпретация — запрещена.

---

## 5. Ключевые принципы экстракции

### 5.1 Отсутствие доменной логики

Следующие элементы НЕ являются частью ядра:

- агробизнес;
- консалтинг;
- обучение;
- геймификация;
- отраслевые отчёты;
- специфические KPI и метрики.

Даже если логика кажется «универсальной» — при наличии доменного смысла
она НЕ ядро.

---

### 5.2 Запрет на изменение поведения

Экстракция НЕ должна менять поведение системы.

#### Разрешено:
- переименование сущностей;
- очистка нейминга;
- физическое разделение модулей;
- перемещение файлов;
- очистка комментариев;
- удаление брендовых терминов.

#### Запрещено:
- изменение FSM;
- изменение бизнес-логики;
- изменение структуры БД;
- изменение сигнатур методов;
- изменение API-контрактов;
- изменение порядка и условий переходов состояний.

---

### 5.3 Канон выше реализации

`BUSINESS_CORE_CANON.md` является высшим источником истины.

Если реализация:
- противоречит канону,
- содержит неописанную в каноне логику,

→ реализация считается ошибочной, а НЕ канон.

---

### 5.4 Роль ИИ в экстракции

ИИ может:
- анализировать код;
- выявлять зависимости;
- предлагать классификацию;
- указывать на потенциальные нарушения канона.

ИИ НЕ может:
- управлять системой;
- принимать решения;
- изменять состояния;
- подменять ответственность человека.

ИИ — советник, а не субъект управления.

---

## 6. Классификация кода

Весь код ОБЯЗАТЕЛЬНО классифицируется по трём классам.

### Класс A — Чистое ядро
- полностью универсален;
- не содержит доменных смыслов;
- переносится без изменений.

### Класс B — Ядро с историческим неймингом
- логика универсальна;
- нейминг, пакеты или комментарии завязаны на MatrixGin.

Переносится с:
- переименованием,
- очисткой терминологии,
- без изменения поведения.

### Класс C — Доменный код
- отраслевые сценарии;
- прикладные процессы;
- продуктовые фичи;
- специализированные отчёты и метрики.

НЕ переносится в ядро.
Выносится в домены или архив.

---

## 7. Запрещённые действия

Следующие действия автоматически дисквалифицируют экстракцию:

- «давайте улучшим по пути»;
- «пока переносим — оптимизируем»;
- «добавим маленькую фичу»;
- «это почти ядро, оставим».

Экстракция — это операция изоляции, а не улучшения.

---

## 8. Обязательные артефакты этапа

Экстракция считается незавершённой, если отсутствует любой из документов:

- `BUSINESS_CORE_CANON.md`
- AS-IS снимок текущего состояния
- классификация кода (A / B / C)
- описание границ ядра и доменов
- документ валидации экстракции

---

## 9. Критерии успешности

Экстракция успешна, если:

- Business Core описывается без упоминания MatrixGin;
- ядро подключается к RAI без изменений;
- второй домен подключается без конфликтов;
- границы ответственности чёткие и проверяемые;
- канон полностью соблюдён.

---

## 10. Рабочая формула этапа

Не переписать.  
Не улучшить.  
Не ускорить.

Отделить.  
Очистить.  
Зафиксировать.

---

## 11. Ограничение фокуса

В рамках экстракции запрещено обсуждать:

- доменные сценарии;
- интерфейсы;
- MVP;
- продуктовые решения;
- UX / UI;
- пользовательские потоки.

Любые подобные вопросы выносятся за пределы этапа.

---

Конец документа.
