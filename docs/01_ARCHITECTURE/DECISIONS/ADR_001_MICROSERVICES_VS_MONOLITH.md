---
id: DOC-ARC-GEN-026
type: HLD
layer: Architecture
status: Draft
version: 0.1.0
owners: [@techlead]
last_updated: 2026-02-15
---

---
id: decision-adr-001
type: decision
status: approved
owners: [architects]
aligned_with: [principle-axioms]
---

# ADR 001: Архитектурный стиль — Модульный Монолит в Monorepo

## Статус
**Принято** | **Версия:** 2.0 | **Дата:** 2026.02.02

## Контекст
Изначально рассматривался переход на множество микросервисов. Однако текущее состояние проекта и размер команды диктуют выбор более прагматичного подхода для Phase Alpha.

## Решение
**Модульный Монолит в Monorepo (Turborepo + NestJS)**

1. **Monorepo**: Используем Turborepo для управления `apps/` и `packages/`.
2. **Единый Backend**: Весь основной функционал живет в `apps/api`.
3. **Логическая модульность**:
   - Разделение на `modules/core` (Identity, Registry) и `modules/rai` (Season, Field, Crop).
   - Строгие границы между модулями внутри NestJS приложения.
4. **Shared Packages**: Общие вещи (Prisma Client, Types) выносятся в `packages/`.

## Обоснование
1. **Скорость итерации**: Легче менять API и схемы данных в рамках одного сервиса.
2. **Реальность**: Сейчас проект уже живет в этой структуре, и она обеспечивает нужную скорость.
3. **Путь к микросервисам**: Модульность в NestJS позволяет в любой момент "отрезать" модуль и вынести его в отдельный сервис.

## Последствия
- Меньше накладных расходов на оркестрацию.
- Упрощенный CI/CD.
- Нужен строгий контроль импортов, чтобы модульный монолит не превратился в спагетти.
